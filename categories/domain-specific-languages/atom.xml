<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Domain Specific Languages on The Conscientious Programmer</title>
    <link>http://ConscientiousProgrammer.com/categories/domain-specific-languages/</link>
    <description>Recent content in Domain Specific Languages on The Conscientious Programmer</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Fri, 04 Dec 2015 17:05:23 -0500</lastBuildDate>
    <atom:link href="http://ConscientiousProgrammer.com/categories/domain-specific-languages/atom/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>24 days of Hackage, 2015: day 4: wreq: Web client programming; with notes on lens and operator syntax</title>
      <link>http://conscientiousprogrammer.com/blog/2015/12/04/24-days-of-hackage-2015-day-4-wreq-web-client-programming-with-notes-on-lens-and-operator-syntax/</link>
      <pubDate>Fri, 04 Dec 2015 17:05:23 -0500</pubDate>
      
      <guid>http://conscientiousprogrammer.com/blog/2015/12/04/24-days-of-hackage-2015-day-4-wreq-web-client-programming-with-notes-on-lens-and-operator-syntax/</guid>
      <description>

&lt;h2 id=&#34;table-of-contents-for-the-whole-series:de6d56fd6945d7d59fdd3a84148a0b85&#34;&gt;Table of contents for the whole series&lt;/h2&gt;

&lt;p&gt;A table of contents is at the top of the article for &lt;a href=&#34;../../blog/2015/11/30/haskell-tidbits-24-days-of-hackage-2015-day-1-introduction-and-stack/&#34;&gt;day 1&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&#34;day-4:de6d56fd6945d7d59fdd3a84148a0b85&#34;&gt;Day 4&lt;/h2&gt;

&lt;p&gt;In the late 1990s, I eagerly bought the book
&lt;a href=&#34;http://www.oreilly.com/openbook/webclient/&#34;&gt;&amp;ldquo;Web Client Programming with Perl&amp;rdquo;&lt;/a&gt;
and used the &lt;a href=&#34;http://search.cpan.org/dist/libwww-perl/lib/LWP.pm&#34;&gt;LWP&lt;/a&gt;
library to scrape the Web in automated fashion. I continued doing that
into the 2000s. I am happy that nowadays, I can just use Haskell to do
this kind of programming, in a succinct way also.&lt;/p&gt;

&lt;p&gt;Today&amp;rsquo;s topic is &lt;a href=&#34;http://www.serpentine.com/wreq/&#34;&gt;&lt;code&gt;wreq&lt;/code&gt;&lt;/a&gt;,
&lt;a href=&#34;http://www.serpentine.com/blog/&#34;&gt;Bryan O&amp;rsquo;Sullivan&lt;/a&gt;&amp;rsquo;s high-level
library for doing Web client programming designed specifically for
usability.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;wreq&lt;/code&gt; makes use of the
&lt;a href=&#34;https://hackage.haskell.org/package/aeson&#34;&gt;&lt;code&gt;aeson&lt;/code&gt;&lt;/a&gt; ecosystem for JSON
and &lt;a href=&#34;https://hackage.haskell.org/package/lens&#34;&gt;&lt;code&gt;lens&lt;/code&gt;&lt;/a&gt; and ecosystem,
including
&lt;a href=&#34;https://hackage.haskell.org/package/lens-aeson&#34;&gt;&lt;code&gt;lens-aeson&lt;/code&gt;&lt;/a&gt;, so you
may want to check out Ollie&amp;rsquo;s 2012 Days of Hackage posts on
&lt;a href=&#34;https://ocharles.org.uk/blog/posts/2012-12-07-24-days-of-hackage-aeson.html&#34;&gt;aeson&lt;/a&gt;
and &lt;a href=&#34;https://ocharles.org.uk/blog/posts/2012-12-09-24-days-of-hackage-lens.html&#34;&gt;lens&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Since &lt;code&gt;wreq&lt;/code&gt; already has an extensive
&lt;a href=&#34;http://www.serpentine.com/wreq/&#34;&gt;tutorial and reference documentation&lt;/a&gt;,
I&amp;rsquo;m not going to repeat its explanations. Instead, I&amp;rsquo;m going to give an
example of use that should be simple enough to be understood from
context, then discuss the issue of using operator syntax in Haskell.&lt;/p&gt;

&lt;h2 id=&#34;the-task:de6d56fd6945d7d59fdd3a84148a0b85&#34;&gt;The task&lt;/h2&gt;

&lt;p&gt;I&amp;rsquo;m a member of many groups on &lt;a href=&#34;http://www.meetup.com/&#34;&gt;Meetup&lt;/a&gt;. It&amp;rsquo;s
often useful for me to get information using the official
&lt;a href=&#34;http://www.meetup.com/meetup_api/&#34;&gt;Meetup API&lt;/a&gt; rather than go around
clicking on a Web site on or a mobile app. Why do by hand what I can
do much more efficiently and correctly with code?&lt;/p&gt;

&lt;p&gt;Here&amp;rsquo;s a very simplified example of something I might want to do with
Meetup. I&amp;rsquo;ve been active in the
&lt;a href=&#34;http://www.codeandsupply.co/&#34;&gt;Pittsburgh Code and Supply&lt;/a&gt; community,
which has a
&lt;a href=&#34;http://www.meetup.com/Pittsburgh-Code-Supply/&#34;&gt;Meetup site&lt;/a&gt; with a
packed calendar of events (it&amp;rsquo;s on hiatus now in December for the
holidays, but is otherwise very active). Maybe I want to find out what
upcoming events they are, and search for events of interest according
to some criteria. For our toy example here, let&amp;rsquo;s say I want to find
the ten upcoming events and get their names and venue names, and make
sure there&amp;rsquo;s at least one event that has a name and venue name already
set up (sometimes, an event is proposed but no venue has been found
yet).&lt;/p&gt;

&lt;h2 id=&#34;a-test:de6d56fd6945d7d59fdd3a84148a0b85&#34;&gt;A test&lt;/h2&gt;

&lt;p&gt;Yesterday,
&lt;a href=&#34;../../blog/2015/12/03/24-days-of-hackage-2015-day-3-hspec-the-importance-of-testing/&#34;&gt;day 3&lt;/a&gt;
of this article series, I mentioned liking using HSpec, so let&amp;rsquo;s use
HSpec.&lt;/p&gt;

&lt;div class=&#34;highlight&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;{-# LANGUAGE OverloadedStrings #-}&lt;/span&gt;

&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color: #0000FF; font-weight: bold&#34;&gt;WreqExample&lt;/span&gt; (&lt;span style=&#34;color: #B00040&#34;&gt;GroupId&lt;/span&gt;, &lt;span style=&#34;color: #0000FF&#34;&gt;eventName&lt;/span&gt;, &lt;span style=&#34;color: #0000FF&#34;&gt;venueName&lt;/span&gt;, &lt;span style=&#34;color: #0000FF&#34;&gt;getMeetupEventInfos&lt;/span&gt;)
&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color: #0000FF; font-weight: bold&#34;&gt;Test.Hspec&lt;/span&gt; ( &lt;span style=&#34;color: #B00040&#34;&gt;Spec&lt;/span&gt;, &lt;span style=&#34;color: #0000FF&#34;&gt;hspec&lt;/span&gt;, &lt;span style=&#34;color: #0000FF&#34;&gt;describe&lt;/span&gt;, &lt;span style=&#34;color: #0000FF&#34;&gt;it&lt;/span&gt;
                  , &lt;span style=&#34;color: #0000FF&#34;&gt;shouldSatisfy&lt;/span&gt;, &lt;span style=&#34;color: #0000FF&#34;&gt;shouldNotSatisfy&lt;/span&gt;
                  )
&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;qualified&lt;/span&gt; &lt;span style=&#34;color: #0000FF; font-weight: bold&#34;&gt;Data.Text&lt;/span&gt; &lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;as&lt;/span&gt; Text
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We are using the &lt;a href=&#34;https://hackage.haskell.org/package/text&#34;&gt;&lt;code&gt;text&lt;/code&gt;&lt;/a&gt;
packed Unicode string type, because that&amp;rsquo;s what &lt;code&gt;wreq&lt;/code&gt;
uses. &lt;code&gt;OverloadedStrings&lt;/code&gt; is a convenient GHC extension that allows
string literals in code to be treated as &lt;code&gt;Text&lt;/code&gt; values rather than
&lt;code&gt;String&lt;/code&gt;. Ollie discusses this extension in his &lt;a href=&#34;https://ocharles.org.uk/blog/posts/2014-12-17-overloaded-strings.html&#34;&gt;2014 Days of GHC Extensions&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Also, since I&amp;rsquo;m operating in test-driven development style, I wrote
this test first, before writing the &lt;code&gt;WreqExample&lt;/code&gt; module: I only wrote
the imports for what I need for the test.&lt;/p&gt;

&lt;div class=&#34;highlight&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #0000FF&#34;&gt;spec&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Spec&lt;/span&gt;
&lt;span style=&#34;color: #0000FF&#34;&gt;spec&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;=&lt;/span&gt;
  describe &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;wreq&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;$&lt;/span&gt; &lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;do&lt;/span&gt;
    it &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;there are named, located Pittsburgh Code and Supply events coming up&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;$&lt;/span&gt; &lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;do&lt;/span&gt;
      &lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;-- Warning! This is a stateful test going out to the Web.&lt;/span&gt;
      events &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;&amp;lt;-&lt;/span&gt; getMeetupEventInfos pittsburghCodeAndSupplyId
      events `shouldNotSatisfy` null
      events `shouldSatisfy` any
        (&lt;span style=&#34;color: #0000FF&#34;&gt;\&lt;/span&gt;event &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;-&amp;gt;&lt;/span&gt; (not &lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Text&lt;/span&gt;&lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt;null &lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt; eventName) event
                   &lt;span style=&#34;color: #666666&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; (not &lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Text&lt;/span&gt;&lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt;null &lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt; venueName) event)

&lt;span style=&#34;color: #0000FF&#34;&gt;pittsburghCodeAndSupplyId&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;GroupId&lt;/span&gt;
&lt;span style=&#34;color: #0000FF&#34;&gt;pittsburghCodeAndSupplyId&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;13452572&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id=&#34;module-signatures:de6d56fd6945d7d59fdd3a84148a0b85&#34;&gt;Module signatures&lt;/h2&gt;

&lt;p&gt;If Haskell had
&lt;a href=&#34;http://jozefg.bitbucket.org/posts/2015-01-08-modules.html&#34;&gt;module signatures, like Standard ML and OCaml do&lt;/a&gt;,
I would write an explicit module signature for the module I intend to
implement that will conform to that signature, but Haskell doesn&amp;rsquo;t, so
the best we can do is operate in &amp;ldquo;duck typing&amp;rdquo; manner at the module
level, relying implicitly on compilation to fail on import of a
conforming module implementation rather than on matching against an
explicit signature without the need for an implementation.&lt;/p&gt;

&lt;p&gt;Here are the types we need (in a pseudo-syntax as though Haskell had
module signatures):&lt;/p&gt;

&lt;div class=&#34;highlight&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;GroupId&lt;/span&gt;    &lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;-- abstract&lt;/span&gt;

&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;EventInfo&lt;/span&gt;  &lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;-- abstract&lt;/span&gt;

&lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;-- abstract type accessors&lt;/span&gt;
&lt;span style=&#34;color: #0000FF&#34;&gt;eventName&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;EventInfo&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Text&lt;/span&gt;
&lt;span style=&#34;color: #0000FF&#34;&gt;venueName&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;EventInfo&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Text&lt;/span&gt;

&lt;span style=&#34;color: #0000FF&#34;&gt;getMeetupEventInfos&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;GroupId&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;IO&lt;/span&gt; [&lt;span style=&#34;color: #B00040&#34;&gt;EventInfo&lt;/span&gt;]
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id=&#34;implementation:de6d56fd6945d7d59fdd3a84148a0b85&#34;&gt;Implementation&lt;/h2&gt;

&lt;h3 id=&#34;imports:de6d56fd6945d7d59fdd3a84148a0b85&#34;&gt;Imports&lt;/h3&gt;

&lt;div class=&#34;highlight&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color: #0000FF; font-weight: bold&#34;&gt;Network.Wreq&lt;/span&gt; (&lt;span style=&#34;color: #B00040&#34;&gt;Options&lt;/span&gt;, &lt;span style=&#34;color: #0000FF&#34;&gt;defaults&lt;/span&gt;, &lt;span style=&#34;color: #0000FF&#34;&gt;param&lt;/span&gt;, &lt;span style=&#34;color: #0000FF&#34;&gt;getWith&lt;/span&gt;, &lt;span style=&#34;color: #0000FF&#34;&gt;asValue&lt;/span&gt;, &lt;span style=&#34;color: #0000FF&#34;&gt;responseBody&lt;/span&gt;)
&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color: #0000FF; font-weight: bold&#34;&gt;Data.Text&lt;/span&gt; (&lt;span style=&#34;color: #B00040&#34;&gt;Text&lt;/span&gt;)
&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color: #0000FF; font-weight: bold&#34;&gt;Data.Aeson&lt;/span&gt; (&lt;span style=&#34;color: #B00040&#34;&gt;Value&lt;/span&gt;)
&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color: #0000FF; font-weight: bold&#34;&gt;Control.Lens&lt;/span&gt; (&lt;span style=&#34;color: #0000FF&#34;&gt;view&lt;/span&gt;, &lt;span style=&#34;color: #0000FF&#34;&gt;set&lt;/span&gt;, &lt;span style=&#34;color: #0000FF&#34;&gt;toListOf&lt;/span&gt;)
&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color: #0000FF; font-weight: bold&#34;&gt;Data.Aeson.Lens&lt;/span&gt; (&lt;span style=&#34;color: #0000FF&#34;&gt;key&lt;/span&gt;, &lt;span style=&#34;color: #0000FF&#34;&gt;_Array&lt;/span&gt;, &lt;span style=&#34;color: #0000FF&#34;&gt;_String&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id=&#34;types:de6d56fd6945d7d59fdd3a84148a0b85&#34;&gt;Types&lt;/h3&gt;

&lt;div class=&#34;highlight&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;-- | Information that we care about from a Meetup event.&lt;/span&gt;
&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;data&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;EventInfo&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;=&lt;/span&gt;
  &lt;span style=&#34;color: #B00040&#34;&gt;EventInfo&lt;/span&gt; { eventName &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Text&lt;/span&gt;
            , venueName &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Text&lt;/span&gt;
            }
  &lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;deriving&lt;/span&gt; (&lt;span style=&#34;color: #B00040&#34;&gt;Show&lt;/span&gt;)

&lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;-- | A valid Meetup group ID.&lt;/span&gt;
&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;GroupId&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Text&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id=&#34;the-web-client-part:de6d56fd6945d7d59fdd3a84148a0b85&#34;&gt;The Web client part&lt;/h3&gt;

&lt;p&gt;Since we&amp;rsquo;re only making one request, and are not doing any error
handling, but letting &lt;code&gt;wreq&lt;/code&gt; throw exceptions instead, the Web client
part is very brief. The Meetup API allows returning information as
JSON.&lt;/p&gt;

&lt;div class=&#34;highlight&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #0000FF&#34;&gt;meetupEventsUrl&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;String&lt;/span&gt;
&lt;span style=&#34;color: #0000FF&#34;&gt;meetupEventsUrl&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;https://api.meetup.com/2/events&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We perform a &lt;code&gt;GET&lt;/code&gt; with query parameters. &lt;code&gt;wreq&lt;/code&gt; uses lens as its
domain-specific language for creating options for &lt;code&gt;GET&lt;/code&gt;, so let&amp;rsquo;s
create a &lt;code&gt;wreq&lt;/code&gt; &lt;code&gt;Options&lt;/code&gt; value, by setting the parameters one after
another using a builder pattern starting with the &lt;code&gt;wreq&lt;/code&gt; &lt;code&gt;defaults&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&#34;highlight&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #0000FF&#34;&gt;eventsOptions&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;GroupId&lt;/span&gt;
              &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Options&lt;/span&gt;
&lt;span style=&#34;color: #0000FF&#34;&gt;eventsOptions&lt;/span&gt; groupId &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;=&lt;/span&gt;
  set (param &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;page&amp;quot;&lt;/span&gt;) [&lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;] (
    set (param &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;order&amp;quot;&lt;/span&gt;) [&lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;time&amp;quot;&lt;/span&gt;] (
      set (param &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;status&amp;quot;&lt;/span&gt;) [&lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;upcoming&amp;quot;&lt;/span&gt;] (
        set (param &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;group_id&amp;quot;&lt;/span&gt;) [groupId] (
          set (param &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;format&amp;quot;&lt;/span&gt;) [&lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;json&amp;quot;&lt;/span&gt;] defaults))))
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We begin by going out to the Web to get back a response, which is a
&lt;a href=&#34;https://hackage.haskell.org/package/bytestring-0.10.6.0/docs/Data-ByteString-Lazy.html&#34;&gt;lazy &lt;code&gt;ByteString&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;&lt;div class=&#34;highlight&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #0000FF&#34;&gt;getMeetupEventInfos&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;GroupId&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;IO&lt;/span&gt; [&lt;span style=&#34;color: #B00040&#34;&gt;EventInfo&lt;/span&gt;]
&lt;span style=&#34;color: #0000FF&#34;&gt;getMeetupEventInfos&lt;/span&gt; groupId &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;do&lt;/span&gt;
  response &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;&amp;lt;-&lt;/span&gt; getWith (eventsOptions groupId) meetupEventsUrl
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;

&lt;h3 id=&#34;the-json-part:de6d56fd6945d7d59fdd3a84148a0b85&#34;&gt;The JSON part&lt;/h3&gt;

&lt;p&gt;Then we parse the lazy &lt;code&gt;ByteString&lt;/code&gt; response, including the headers
and the body, into an untyped JSON object, an &lt;code&gt;aeson&lt;/code&gt;
&lt;a href=&#34;https://hackage.haskell.org/package/aeson-0.10.0.0/docs/Data-Aeson.html#t:Value&#34;&gt;&lt;code&gt;Value&lt;/code&gt;&lt;/a&gt;:
&lt;div class=&#34;highlight&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;  jsonResponse &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;&amp;lt;-&lt;/span&gt; asValue response
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;

&lt;p&gt;More precisely, &lt;a href=&#34;https://hackage.haskell.org/package/aeson-0.10.0.0/docs/src/Data-Aeson-Types-Internal.html#Value&#34;&gt;&lt;code&gt;Value&lt;/code&gt; is unityped&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;&lt;div class=&#34;highlight&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Object&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;HashMap&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Text&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Value&lt;/span&gt;

&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Array&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Vector&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Value&lt;/span&gt;

&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;data&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Value&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Object&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;!&lt;/span&gt;&lt;span style=&#34;color: #B00040&#34;&gt;Object&lt;/span&gt;
           &lt;span style=&#34;color: #666666&#34;&gt;|&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Array&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;!&lt;/span&gt;&lt;span style=&#34;color: #B00040&#34;&gt;Array&lt;/span&gt;
           &lt;span style=&#34;color: #666666&#34;&gt;|&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;String&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;!&lt;/span&gt;&lt;span style=&#34;color: #B00040&#34;&gt;Text&lt;/span&gt;
           &lt;span style=&#34;color: #666666&#34;&gt;|&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Number&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;!&lt;/span&gt;&lt;span style=&#34;color: #B00040&#34;&gt;Scientific&lt;/span&gt;
           &lt;span style=&#34;color: #666666&#34;&gt;|&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Bool&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;!&lt;/span&gt;&lt;span style=&#34;color: #B00040&#34;&gt;Bool&lt;/span&gt;
           &lt;span style=&#34;color: #666666&#34;&gt;|&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Null&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;

&lt;h3 id=&#34;the-lens-part:de6d56fd6945d7d59fdd3a84148a0b85&#34;&gt;The lens part&lt;/h3&gt;

&lt;p&gt;It was annoying figuring out from the official
Meetup API site what fields I needed from the response and what their
types were supposed to be. In practice I just saved off JSON from a
representative query and looked at some events to see what I wanted. I
was told where to find the
&lt;a href=&#34;meetup.json&#34;&gt;automatically generated documentation of all the API methods&lt;/a&gt;
but it was not ideal. A later Day of Hackage will discuss what I did
about this problem.&lt;/p&gt;

&lt;p&gt;We extract the list of events, using a traversal to get the whole
list, which is encoded as a JSON array in the top level JSON object&amp;rsquo;s
&lt;code&gt;results&lt;/code&gt; field:&lt;/p&gt;

&lt;p&gt;&lt;div class=&#34;highlight&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;  &lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;let&lt;/span&gt; events &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;=&lt;/span&gt; toListOf (responseBody
                         &lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt; key &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;results&amp;quot;&lt;/span&gt;
                         &lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt; _Array &lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt; traverse
                        ) jsonResponse
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;

&lt;p&gt;Here we use &lt;code&gt;toListOf&lt;/code&gt; from lens with a traversal and a JSON object to
pull out everything from that traversal.&lt;/p&gt;

&lt;p&gt;Finally, since we only want, for each event, its name and
its venue&amp;rsquo;s name (the venue&amp;rsquo;s name is actually a field in a venue
object):&lt;/p&gt;

&lt;p&gt;&lt;div class=&#34;highlight&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;  return (map jsonToEventInfo events)
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;

&lt;p&gt;We again use lens, at the level of an individual event object, to
extract what we want from it:&lt;/p&gt;

&lt;p&gt;&lt;div class=&#34;highlight&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;-- | Extract our typed data model from an untyped JSON object.&lt;/span&gt;
&lt;span style=&#34;color: #0000FF&#34;&gt;jsonToEventInfo&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Value&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;EventInfo&lt;/span&gt;
&lt;span style=&#34;color: #0000FF&#34;&gt;jsonToEventInfo&lt;/span&gt; json &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;=&lt;/span&gt;
  &lt;span style=&#34;color: #B00040&#34;&gt;EventInfo&lt;/span&gt; { eventName &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;=&lt;/span&gt; view (key &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;name&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt; _String) json
            , venueName &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;=&lt;/span&gt; view (key &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;venue&amp;quot;&lt;/span&gt;
                                &lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt; key &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;name&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt; _String) json
            }
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;

&lt;p&gt;Here we use the &lt;code&gt;view&lt;/code&gt; function of &lt;code&gt;lens&lt;/code&gt;, to apply a lens to the JSON
object to pull a field out of it.&lt;/p&gt;

&lt;p&gt;And we&amp;rsquo;re done! We&amp;rsquo;ve written a script that looks pretty much like
what you&amp;rsquo;d write in Perl or Python. It will also &amp;ldquo;fail&amp;rdquo; in similar
ways, because we&amp;rsquo;re basically not using any types at all; even the
final result just has strings, which may or may not be empty, whatever
that&amp;rsquo;s supposed to mean. For example, if you try to find a field by a
string key that doesn&amp;rsquo;t exist, the particular code here will just
silently give back an empty string. Can we do better? Yes, there are
various ways to do better. Stay tuned for a later Day of Hackage.&lt;/p&gt;

&lt;h2 id=&#34;lens-operator-syntax:de6d56fd6945d7d59fdd3a84148a0b85&#34;&gt;Lens operator syntax&lt;/h2&gt;

&lt;p&gt;If you&amp;rsquo;ve already used &lt;code&gt;wreq&lt;/code&gt; or &lt;code&gt;lens&lt;/code&gt;, you may have noticed
something strange above: I didn&amp;rsquo;t use any &lt;code&gt;lens&lt;/code&gt; operator syntax. This
was deliberate. Although the &lt;code&gt;wreq&lt;/code&gt; tutorial gives a
&lt;a href=&#34;http://www.serpentine.com/wreq/tutorial.html#a-quick-lens-backgrounder&#34;&gt;little bit of background on &lt;code&gt;lens&lt;/code&gt;&lt;/a&gt;,
the reality is that when some friends who were not experienced lensers
or Haskellers asked me how I do Web client programming in Haskell, and
I pointed to &lt;code&gt;wreq&lt;/code&gt; as being pretty cool, they got immediately stuck
on the lens stuff. Looking back at the tutorial, I do see that it
jumps straight into operator soup. This is unfortunate. You can
immediately use libraries like &lt;code&gt;wreq&lt;/code&gt; without having the lens
operators memorized already. You have to understand some facts (such
as the use of the function composition operator to compose lenses) and
have an idea of how the types work out, but one thing you don&amp;rsquo;t need
is the funny operators. I think it&amp;rsquo;s best to understand how to do
things without operators before starting to use them as a convenient
shortcut.&lt;/p&gt;

&lt;p&gt;For example, an idiomatic way to set the options object, as presented
in the &amp;ldquo;whirlwind tour&amp;rdquo; section of the &lt;code&gt;wreq&lt;/code&gt; tutorial, is:&lt;/p&gt;

&lt;p&gt;&lt;div class=&#34;highlight&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color: #0000FF; font-weight: bold&#34;&gt;Control.Lens&lt;/span&gt; ((&lt;span style=&#34;color: #666666&#34;&gt;&amp;amp;&lt;/span&gt;), (&lt;span style=&#34;color: #666666&#34;&gt;.~&lt;/span&gt;))

&lt;span style=&#34;color: #0000FF&#34;&gt;eventsOptions&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;GroupId&lt;/span&gt;
              &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Options&lt;/span&gt;
&lt;span style=&#34;color: #0000FF&#34;&gt;eventsOptions&lt;/span&gt; groupId &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;=&lt;/span&gt; defaults
  &lt;span style=&#34;color: #666666&#34;&gt;&amp;amp;&lt;/span&gt; param &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;format&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;.~&lt;/span&gt; [&lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;json&amp;quot;&lt;/span&gt;]
  &lt;span style=&#34;color: #666666&#34;&gt;&amp;amp;&lt;/span&gt; param &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;group_id&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;.~&lt;/span&gt; [groupId]
  &lt;span style=&#34;color: #666666&#34;&gt;&amp;amp;&lt;/span&gt; param &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;status&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;.~&lt;/span&gt; [&lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;upcoming&amp;quot;&lt;/span&gt;]
  &lt;span style=&#34;color: #666666&#34;&gt;&amp;amp;&lt;/span&gt; param &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;order&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;.~&lt;/span&gt; [&lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;time&amp;quot;&lt;/span&gt;]
  &lt;span style=&#34;color: #666666&#34;&gt;&amp;amp;&lt;/span&gt; param &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;page&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;.~&lt;/span&gt; [&lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;]
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;

&lt;p&gt;I don&amp;rsquo;t like the idea of newcomers to this library just copying and
pasting stuff without understanding what it does, or getting the
impression that these operators are somehow built into the Haskell
language or required for using the library. People really do get these
impressions.&lt;/p&gt;

&lt;p&gt;I happen to like the reverse function operator &lt;code&gt;&amp;amp;&lt;/code&gt; a lot, although
it&amp;rsquo;s not as suggestive as the exact same reverse function operator in
many other languages (such as F#, OCaml, Elm, Elixir) in the form of a pipe
instead
&lt;a href=&#34;http://package.elm-lang.org/packages/elm-lang/core/3.0.0/Basics#|%3E&#34;&gt;&lt;code&gt;|&amp;gt;&lt;/code&gt;&lt;/a&gt;,
so I feel OK about using it.&lt;/p&gt;

&lt;p&gt;But the &lt;code&gt;.~&lt;/code&gt; is I think not very suggestive to newcomers to
&lt;code&gt;lens&lt;/code&gt;. Is &lt;code&gt;set lens newValue object&lt;/code&gt; so much worse to write or read than
&lt;code&gt;object &amp;amp; lens .~ newValue&lt;/code&gt;?&lt;/p&gt;

&lt;h2 id=&#34;code-golf:de6d56fd6945d7d59fdd3a84148a0b85&#34;&gt;Code golf?&lt;/h2&gt;

&lt;p&gt;To illustrate both the up sides and down sides of using operators (but
in this case mostly down sides, I think), here is a code golf version
of the entire code:&lt;/p&gt;

&lt;p&gt;&lt;div class=&#34;highlight&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color: #0000FF; font-weight: bold&#34;&gt;Network.Wreq&lt;/span&gt; (&lt;span style=&#34;color: #B00040&#34;&gt;Options&lt;/span&gt;, &lt;span style=&#34;color: #0000FF&#34;&gt;defaults&lt;/span&gt;, &lt;span style=&#34;color: #0000FF&#34;&gt;param&lt;/span&gt;, &lt;span style=&#34;color: #0000FF&#34;&gt;getWith&lt;/span&gt;, &lt;span style=&#34;color: #0000FF&#34;&gt;asValue&lt;/span&gt;, &lt;span style=&#34;color: #0000FF&#34;&gt;responseBody&lt;/span&gt;)
&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color: #0000FF; font-weight: bold&#34;&gt;Data.Text&lt;/span&gt; (&lt;span style=&#34;color: #B00040&#34;&gt;Text&lt;/span&gt;)
&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color: #0000FF; font-weight: bold&#34;&gt;Control.Lens&lt;/span&gt; ((&lt;span style=&#34;color: #666666&#34;&gt;&amp;amp;&lt;/span&gt;), (&lt;span style=&#34;color: #666666&#34;&gt;.~&lt;/span&gt;), (&lt;span style=&#34;color: #666666&#34;&gt;^.&lt;/span&gt;), (&lt;span style=&#34;color: #666666&#34;&gt;^..&lt;/span&gt;))
&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color: #0000FF; font-weight: bold&#34;&gt;Data.Aeson.Lens&lt;/span&gt; (&lt;span style=&#34;color: #0000FF&#34;&gt;key&lt;/span&gt;, &lt;span style=&#34;color: #0000FF&#34;&gt;_Array&lt;/span&gt;, &lt;span style=&#34;color: #0000FF&#34;&gt;_String&lt;/span&gt;)
&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color: #0000FF; font-weight: bold&#34;&gt;Control.Arrow&lt;/span&gt; ((&lt;span style=&#34;color: #666666&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;), (&lt;span style=&#34;color: #666666&#34;&gt;&amp;amp;&amp;amp;&amp;amp;&lt;/span&gt;))

&lt;span style=&#34;color: #0000FF&#34;&gt;meetupEventsUrl&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;String&lt;/span&gt;
&lt;span style=&#34;color: #0000FF&#34;&gt;meetupEventsUrl&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;https://api.meetup.com/2/events&amp;quot;&lt;/span&gt;

&lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;-- | A valid Meetup group ID.&lt;/span&gt;
&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;GroupId&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Text&lt;/span&gt;

&lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;-- | For searching for events in a Meetup group.&lt;/span&gt;
&lt;span style=&#34;color: #0000FF&#34;&gt;eventsOptions&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;GroupId&lt;/span&gt;
              &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Options&lt;/span&gt;
&lt;span style=&#34;color: #0000FF&#34;&gt;eventsOptions&lt;/span&gt; groupId &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;=&lt;/span&gt; defaults
  &lt;span style=&#34;color: #666666&#34;&gt;&amp;amp;&lt;/span&gt; param &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;format&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;.~&lt;/span&gt; [&lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;json&amp;quot;&lt;/span&gt;]
  &lt;span style=&#34;color: #666666&#34;&gt;&amp;amp;&lt;/span&gt; param &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;group_id&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;.~&lt;/span&gt; [groupId]
  &lt;span style=&#34;color: #666666&#34;&gt;&amp;amp;&lt;/span&gt; param &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;status&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;.~&lt;/span&gt; [&lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;upcoming&amp;quot;&lt;/span&gt;]
  &lt;span style=&#34;color: #666666&#34;&gt;&amp;amp;&lt;/span&gt; param &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;order&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;.~&lt;/span&gt; [&lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;time&amp;quot;&lt;/span&gt;]
  &lt;span style=&#34;color: #666666&#34;&gt;&amp;amp;&lt;/span&gt; param &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;page&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;.~&lt;/span&gt; [&lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;]

&lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;-- | Code golf version. Don&amp;#39;t do this?&lt;/span&gt;
&lt;span style=&#34;color: #0000FF&#34;&gt;getMeetupNameAndVenues&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;GroupId&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;IO&lt;/span&gt; [(&lt;span style=&#34;color: #B00040&#34;&gt;Text&lt;/span&gt;, &lt;span style=&#34;color: #B00040&#34;&gt;Text&lt;/span&gt;)]
&lt;span style=&#34;color: #0000FF&#34;&gt;getMeetupNameAndVenues&lt;/span&gt; groupId &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;=&lt;/span&gt;
  getWith (eventsOptions groupId) meetupEventsUrl
  &lt;span style=&#34;color: #666666&#34;&gt;&amp;gt;&amp;gt;=&lt;/span&gt; asValue
  &lt;span style=&#34;color: #666666&#34;&gt;&amp;gt;&amp;gt;=&lt;/span&gt; ((&lt;span style=&#34;color: #666666&#34;&gt;^..&lt;/span&gt; responseBody
        &lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt; key &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;results&amp;quot;&lt;/span&gt;
        &lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt; _Array &lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt; traverse)
       &lt;span style=&#34;color: #666666&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; map ((&lt;span style=&#34;color: #666666&#34;&gt;^.&lt;/span&gt; key &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;name&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt; _String)
                 &lt;span style=&#34;color: #666666&#34;&gt;&amp;amp;&amp;amp;&amp;amp;&lt;/span&gt; (&lt;span style=&#34;color: #666666&#34;&gt;^.&lt;/span&gt; key &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;venue&amp;quot;&lt;/span&gt;
                      &lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt; key &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;name&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt; _String)
                 )
       &lt;span style=&#34;color: #666666&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; return
      )
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;

&lt;p&gt;In a way, this looks cool because the piping left to right reads well
and naturally, if you know all the operators and are happy with
operator sectioning syntax and point-free combinators. But when I
showed this to friends who are not so fluent in Haskell, they didn&amp;rsquo;t
like this. Also, note that I made concessions in order to arrange this
pipeline. I lost the comments, the intermediate named sub-computations
(very useful for finer-grained testing), and even my custom result
type (resorting to just tupling). I feel something has been lost by
writing in this style even though part of me secretly likes it.&lt;/p&gt;

&lt;h2 id=&#34;an-interview-with-bryan-o-sullivan:de6d56fd6945d7d59fdd3a84148a0b85&#34;&gt;An interview with Bryan O&amp;rsquo;Sullivan&lt;/h2&gt;

&lt;p&gt;Recently (September 2015), &lt;a href=&#34;http://www.haskellcast.com/&#34;&gt;The Haskell Cast&lt;/a&gt; interviewed Bryan
O&amp;rsquo;Sullivan. I highly recommend listening to &lt;a href=&#34;http://www.haskellcast.com/episode/010-bryan-osullivan-on-performance-and-efficiency/&#34;&gt;the whole thing&lt;/a&gt;. He
had stories to tell about how he got into Haskell, how he ended up
writing all these libraries, and how he goes about designing them and
what his goals are when implementing them. Note that &lt;code&gt;aeson&lt;/code&gt; and
&lt;code&gt;text&lt;/code&gt;, which everyone uses, are his creations. Thank you, Bryan, for
all you&amp;rsquo;ve done for the Haskell community!&lt;/p&gt;

&lt;h2 id=&#34;lens-resources:de6d56fd6945d7d59fdd3a84148a0b85&#34;&gt;Lens resources&lt;/h2&gt;

&lt;p&gt;Gabriel Gonzalez wrote a
&lt;a href=&#34;https://hackage.haskell.org/package/lens-tutorial&#34;&gt;lens tutorial&lt;/a&gt;
that is useful. Thank you, Gabriel, for writing tutorials not only on
your own libraries, but for others as well!&lt;/p&gt;

&lt;h2 id=&#34;conclusion:de6d56fd6945d7d59fdd3a84148a0b85&#34;&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;For day 4, I presented a tiny example of use of &lt;code&gt;wreq&lt;/code&gt; with &lt;code&gt;aeson&lt;/code&gt;
and &lt;code&gt;lens&lt;/code&gt; to perform a simple task of getting information from the
Web, and tried to make &lt;code&gt;wreq&lt;/code&gt; more accessible by not requiring use of
&lt;code&gt;lens&lt;/code&gt; operators up front.&lt;/p&gt;

&lt;h2 id=&#34;all-the-code:de6d56fd6945d7d59fdd3a84148a0b85&#34;&gt;All the code&lt;/h2&gt;

&lt;p&gt;All my code for my article series are at
&lt;a href=&#34;https://github.com/FranklinChen/twenty-four-days2015-of-hackage&#34;&gt;this GitHub repo&lt;/a&gt;.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>24 days of Hackage, 2015: day 3: HSpec; the importance of testing</title>
      <link>http://conscientiousprogrammer.com/blog/2015/12/03/24-days-of-hackage-2015-day-3-hspec-the-importance-of-testing/</link>
      <pubDate>Thu, 03 Dec 2015 07:55:59 -0500</pubDate>
      
      <guid>http://conscientiousprogrammer.com/blog/2015/12/03/24-days-of-hackage-2015-day-3-hspec-the-importance-of-testing/</guid>
      <description>

&lt;h2 id=&#34;table-of-contents-for-the-whole-series:740606311d3fcf0ba2f14607a358bd73&#34;&gt;Table of contents for the whole series&lt;/h2&gt;

&lt;p&gt;A table of contents is at the top of the article for &lt;a href=&#34;../../blog/2015/11/30/haskell-tidbits-24-days-of-hackage-2015-day-1-introduction-and-stack/&#34;&gt;day 1&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&#34;day-3:740606311d3fcf0ba2f14607a358bd73&#34;&gt;Day 3&lt;/h2&gt;

&lt;p&gt;I spent my formative years writing software before &amp;ldquo;testing framework&amp;rdquo;
was in my vocabulary, before
&lt;a href=&#34;https://en.wikipedia.org/wiki/Test-driven_development&#34;&gt;&amp;ldquo;test-driven development&amp;rdquo;&lt;/a&gt;
was a thing. I shudder to think of those years, because now I&amp;rsquo;m a
believer in tests and even in test-driven development (TDD), according to my
interpretation of what that means (since everyone has a different
definition).&lt;/p&gt;

&lt;p&gt;There are a bunch of testing tools that have been available in the
Haskell ecosystem for some time. In fact, Ollie in his &amp;ldquo;24 Days of
Hackage&amp;rdquo; covered&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://hackage.haskell.org/package/QuickCheck&#34;&gt;&lt;code&gt;QuickCheck&lt;/code&gt;&lt;/a&gt;
&lt;a href=&#34;https://ocharles.org.uk/blog/posts/2012-12-08-24-days-of-hackage.html&#34;&gt;in 2012&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://hackage.haskell.org/package/doctest&#34;&gt;&lt;code&gt;doctest&lt;/code&gt;&lt;/a&gt; &lt;a href=&#34;https://ocharles.org.uk/blog/posts/2013-12-18-doctest.html&#34;&gt;in 2013&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://documentup.com/feuerbach/tasty&#34;&gt;&lt;code&gt;tasty&lt;/code&gt;&lt;/a&gt; &lt;a href=&#34;https://ocharles.org.uk/blog/posts/2013-12-03-24-days-of-hackage-tasty.html&#34;&gt;in 2013&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;and I heartily recommend looking those up.&lt;/p&gt;

&lt;p&gt;But today I&amp;rsquo;m going to show use of &lt;a href=&#34;http://hspec.github.io/&#34;&gt;&lt;code&gt;HSpec&lt;/code&gt;&lt;/a&gt;
(noting that a framework like &lt;code&gt;tasty&lt;/code&gt; or
&lt;a href=&#34;`https://batterseapower.github.io/test-framework/&#34;&gt;&lt;code&gt;test-framework&lt;/code&gt;&lt;/a&gt;
are a lot fancier).&lt;/p&gt;

&lt;h2 id=&#34;why-tests:740606311d3fcf0ba2f14607a358bd73&#34;&gt;Why tests?&lt;/h2&gt;

&lt;p&gt;I first got into writing tests for two reasons:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Using languages like Perl, it was essentially impossible to
be productive without writing tests.&lt;/li&gt;
&lt;li&gt;Such languages spawned the tooling to ease the pain of writing,
running, and getting feedback from tests.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;But after getting started, I didn&amp;rsquo;t look back, even when using other
languages such as Scala and Haskell. Today, no matter what language
I&amp;rsquo;m using, I expect there to be a decent testing framework I can
immediately start using. I even did the experiment of
&lt;a href=&#34;http://conscientiousprogrammer.com/blog/2013/08/26/openhack-pittsburgh-learning-elixir-test-driven-and-package-publishing/&#34;&gt;learning a brand new language, Elixir, through writing tests&lt;/a&gt;. I
cannot take a language ecosystem seriously if there is not at least
some reasonable default standard testing framework that is part of it.&lt;/p&gt;

&lt;p&gt;There&amp;rsquo;s a myth (or joke) about using languages like Haskell that have
a decent type system: that you don&amp;rsquo;t need tests because you have
types. Hence the unfortunate phrase &amp;ldquo;tests versus types&amp;rdquo;. I completely
disagree with this. I want my types and I want my tests too: I want to
use every possible tool to help me design, verify, and troubleshoot my
code! At &lt;a href=&#34;http://pghtechfest.com/&#34;&gt;Pittsburgh TechFest&lt;/a&gt; 2014, I gave a
talk
&lt;a href=&#34;http://www.slideshare.net/FranklinChen/presentation-37257104&#34;&gt;&amp;ldquo;Exploring type-directed, test-driven development&amp;rdquo;&lt;/a&gt;
giving my personal view of making the best use of both types and tests
as part of an iterative process of refining understanding and
expression of a solution for a task
(this was before the term &amp;ldquo;type-directed development&amp;rdquo; became the title
of a coming book on using Idris,
&lt;a href=&#34;https://www.manning.com/books/type-driven-development-with-idris&#34;&gt;&amp;ldquo;Type-directed development with Idris&amp;rdquo;&lt;/a&gt;,
whose completion I look forward to!).&lt;/p&gt;

&lt;p&gt;The general topic of how best to combine types and tests is well
outside the scope of this article, but I just want to make one claim:
the primary benefits of tests come from their role as &lt;em&gt;explicit
documentation of intent during a design process&lt;/em&gt;. Ideally, we prefer to
write down expressive types to fully encode intent, and dependently
typed languages such as Idris enable transforming a lot of what used
to be runtime tests into compile-time tests encoded as type checking,
and you can do a bunch of this with Haskell already if you work hard
enough (and
&lt;a href=&#34;https://ghc.haskell.org/trac/ghc/wiki/DependentHaskell&#34;&gt;Dependent Haskell&lt;/a&gt;
is in progress), but there is nothing wrong with writing tests today
that someday you might turn into types.&lt;/p&gt;

&lt;h3 id=&#34;breaking-news:740606311d3fcf0ba2f14607a358bd73&#34;&gt;Breaking news!&lt;/h3&gt;

&lt;p&gt;By sheer coincidence, a
&lt;a href=&#34;https://blogs.janestreet.com/testing-with-expectations/&#34;&gt;new testing framework was just announced for OCaml&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;And today, right after I initially published this article, I found in
my news feed an announcement about &lt;a href=&#34;http://quickfuzz.org/&#34;&gt;QuickFuzz&lt;/a&gt;,
a grammar fuzz tester for Haskell!&lt;/p&gt;

&lt;p&gt;It&amp;rsquo;s great that testing is being taken more seriously everywhere and by
everyone.&lt;/p&gt;

&lt;h2 id=&#34;why-hspec:740606311d3fcf0ba2f14607a358bd73&#34;&gt;Why HSpec?&lt;/h2&gt;

&lt;p&gt;Why do I use HSpec, and not one of the fancier testing frameworks? I&amp;rsquo;m
not ruling out migrating to one of those in the future, but for now,
HSpec just feels really easy and comfortable to use, and is good
enough for me. I am so freaking lazy that I might not write tests if I
get intimidated by any possible sources of friction. And I&amp;rsquo;ll admit
that its &lt;a href=&#34;http://hspec.github.io/&#34;&gt;Web site&lt;/a&gt; is pretty good! Marketing
matters, I guess.&lt;/p&gt;

&lt;p&gt;Also, when I was using Ruby, I got accustomed to using
&lt;a href=&#34;http://rspec.info/&#34;&gt;RSpec&lt;/a&gt;, which of course was the inspiration for
HSpec.&lt;/p&gt;

&lt;h2 id=&#34;it-s-all-about-auto-discovery:740606311d3fcf0ba2f14607a358bd73&#34;&gt;It&amp;rsquo;s all about auto-discovery&lt;/h2&gt;

&lt;p&gt;Before even saying anything more about HSpec, I want to say that one
selling point of HSpec for me was auto-discovery. Check out the
&lt;a href=&#34;http://hspec.github.io/hspec-discover.html&#34;&gt;manual&lt;/a&gt; for full details.&lt;/p&gt;

&lt;p&gt;Auto-discovery means that given a simple boilerplate setup, you can
use &amp;ldquo;convention over configuration&amp;rdquo; and just give test module file
names matching &lt;code&gt;*Spec.hs&lt;/code&gt; and sticking them anywhere embedded inside
your &lt;code&gt;test/&lt;/code&gt; directory and they will all be picked up when you run
&lt;code&gt;stack test&lt;/code&gt;. This means being able to write test modules at will,
rename, delete, add, refactor them and not have to worry about
manually writing a boilerplate driver module that tediously imports
all the test modules and wires them up into a single project test
suite.&lt;/p&gt;

&lt;p&gt;Here&amp;rsquo;s the setup I have for all my projects that use HSpec. I provide
it from my sample project template described on
&lt;a href=&#34;../../blog/2015/11/30/haskell-tidbits-24-days-of-hackage-2015-day-1-introduction-and-stack/&#34;&gt;day 1&lt;/a&gt;,
so you can now generate a starter project with HSpec all ready to go
by running&lt;/p&gt;

&lt;div class=&#34;highlight&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #000080; font-weight: bold&#34;&gt;$&lt;/span&gt; stack new my-new-project franklinchen
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;There is a &lt;code&gt;test/&lt;/code&gt; directory with a single file in it, the
auto-discovery file named &lt;code&gt;test/Spec.hs&lt;/code&gt;, which has a single line of
code, actually a comment:&lt;/p&gt;

&lt;div class=&#34;highlight&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;{-# OPTIONS_GHC -F -pgmF hspec-discover #-}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This works because when you have HSpec installed, a program
&lt;code&gt;hspec-discover&lt;/code&gt; also gets installed, and it&amp;rsquo;s called by GHC to do the
work of auto-discovery. Each test module should export &lt;code&gt;spec&lt;/code&gt;, because
that&amp;rsquo;s what the auto-discovery program will collect to call.&lt;/p&gt;

&lt;h2 id=&#34;writing-and-refactoring-tests:740606311d3fcf0ba2f14607a358bd73&#34;&gt;Writing and refactoring tests&lt;/h2&gt;

&lt;p&gt;I didn&amp;rsquo;t mention it in
&lt;a href=&#34;../../blog/2015/12/02/24-days-of-hackage-2015-day-2-regexes-with-pcre-heavy-standalone-haskell-scripts-using-stack/&#34;&gt;yesterday&amp;rsquo;s post about using a regex&lt;/a&gt;
to solve a problem, but when I wrote out examples of strings that are
supposed to match a regex and examples of strings that are not
supposed to match it, I simply copied and pasted those examples from
tests I had written.&lt;/p&gt;

&lt;p&gt;Let&amp;rsquo;s walk through writing &lt;code&gt;PCREHeavyExampleSpec.hs&lt;/code&gt;, step by
step.&lt;/p&gt;

&lt;h3 id=&#34;initial-version-of-test-code:740606311d3fcf0ba2f14607a358bd73&#34;&gt;Initial version of test code&lt;/h3&gt;

&lt;p&gt;First, I&amp;rsquo;ll present code that I never actually wrote initially, because I
skipped this step and immediately refactored it in my mind. But I
decided that to showcase Haskell&amp;rsquo;s strength as a language for
embedding a domain-specific language (DSL), I retroactively wrote the
most obvious code that shows how HSpec works without introducing
non-HSpec considerations. (The code is on branch &lt;a href=&#34;https://github.com/FranklinChen/twenty-four-days2015-of-hackage/tree/boilerplated-hspec&#34;&gt;&lt;code&gt;boilerplated-hspec&lt;/code&gt;&lt;/a&gt;.)&lt;/p&gt;

&lt;div class=&#34;highlight&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;module&lt;/span&gt; &lt;span style=&#34;color: #0000FF; font-weight: bold&#34;&gt;PCREHeavyExampleSpec&lt;/span&gt; &lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;where&lt;/span&gt;

&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color: #0000FF; font-weight: bold&#34;&gt;PCREHeavyExample&lt;/span&gt; (&lt;span style=&#34;color: #0000FF&#34;&gt;mediaRegex&lt;/span&gt;)

&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color: #0000FF; font-weight: bold&#34;&gt;Test.Hspec&lt;/span&gt; (&lt;span style=&#34;color: #B00040&#34;&gt;Spec&lt;/span&gt;, &lt;span style=&#34;color: #0000FF&#34;&gt;describe&lt;/span&gt;, &lt;span style=&#34;color: #0000FF&#34;&gt;it&lt;/span&gt;, &lt;span style=&#34;color: #0000FF&#34;&gt;shouldSatisfy&lt;/span&gt;)
&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color: #0000FF; font-weight: bold&#34;&gt;Text.Regex.PCRE.Heavy&lt;/span&gt; ((&lt;span style=&#34;color: #666666&#34;&gt;=~&lt;/span&gt;))

&lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;-- | Required for auto-discovery.&lt;/span&gt;
&lt;span style=&#34;color: #0000FF&#34;&gt;spec&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Spec&lt;/span&gt;
&lt;span style=&#34;color: #0000FF&#34;&gt;spec&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;=&lt;/span&gt;
  describe &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;pcre-heavy&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;$&lt;/span&gt; &lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;do&lt;/span&gt;
    describe &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;match&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;$&lt;/span&gt; &lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;do&lt;/span&gt;
      it &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;has audio&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;$&lt;/span&gt; &lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;do&lt;/span&gt;
        &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;@Media:&lt;/span&gt;&lt;span style=&#34;color: #BB6622; font-weight: bold&#34;&gt;\t&lt;/span&gt;&lt;span style=&#34;color: #BA2121&#34;&gt;has-audio,   audio&amp;quot;&lt;/span&gt; `shouldSatisfy` (&lt;span style=&#34;color: #666666&#34;&gt;=~&lt;/span&gt; mediaRegex)
      it &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;has video&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;$&lt;/span&gt; &lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;do&lt;/span&gt;
        &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;@Media:&lt;/span&gt;&lt;span style=&#34;color: #BB6622; font-weight: bold&#34;&gt;\t&lt;/span&gt;&lt;span style=&#34;color: #BA2121&#34;&gt;has-video,video&amp;quot;&lt;/span&gt; `shouldSatisfy` (&lt;span style=&#34;color: #666666&#34;&gt;=~&lt;/span&gt; mediaRegex)
      it &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;has audio but missing&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;$&lt;/span&gt; &lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;do&lt;/span&gt;
        &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;@Media:&lt;/span&gt;&lt;span style=&#34;color: #BB6622; font-weight: bold&#34;&gt;\t&lt;/span&gt;&lt;span style=&#34;color: #BA2121&#34;&gt;has-audio-but-missing, audio, missing&amp;quot;&lt;/span&gt; `shouldSatisfy` (&lt;span style=&#34;color: #666666&#34;&gt;=~&lt;/span&gt; mediaRegex)
      it &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;has video but unlinked&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;$&lt;/span&gt; &lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;do&lt;/span&gt;
        &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;@Media:&lt;/span&gt;&lt;span style=&#34;color: #BB6622; font-weight: bold&#34;&gt;\t&lt;/span&gt;&lt;span style=&#34;color: #BA2121&#34;&gt;has-video-but-unlinked  , video,      unlinked&amp;quot;&lt;/span&gt; `shouldSatisfy` (&lt;span style=&#34;color: #666666&#34;&gt;=~&lt;/span&gt; mediaRegex)
    describe &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;no match&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;$&lt;/span&gt; &lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;do&lt;/span&gt;
      it &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;no audio or video&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;$&lt;/span&gt; &lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;do&lt;/span&gt;
        &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;@Media:&lt;/span&gt;&lt;span style=&#34;color: #BB6622; font-weight: bold&#34;&gt;\t&lt;/span&gt;&lt;span style=&#34;color: #BA2121&#34;&gt;no-audio-or-video&amp;quot;&lt;/span&gt; `shouldSatisfy` (not &lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt; (&lt;span style=&#34;color: #666666&#34;&gt;=~&lt;/span&gt; mediaRegex))
      it &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;missing media field&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;$&lt;/span&gt; &lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;do&lt;/span&gt;
        &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;@Media:&lt;/span&gt;&lt;span style=&#34;color: #BB6622; font-weight: bold&#34;&gt;\t&lt;/span&gt;&lt;span style=&#34;color: #BA2121&#34;&gt;missing-media-field, unlinked&amp;quot;&lt;/span&gt; `shouldSatisfy` (not &lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt; (&lt;span style=&#34;color: #666666&#34;&gt;=~&lt;/span&gt; mediaRegex))
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The main thing to understand is that for simplest use (without
fixtures, effects, etc.), a basic description-labeled spec item is
introduced with &lt;code&gt;it&lt;/code&gt;, and a labeled &lt;code&gt;describe&lt;/code&gt; can contain many of
those as well as sub-&lt;code&gt;describe&lt;/code&gt;s.&lt;/p&gt;

&lt;p&gt;Here, we have two sub-&lt;code&gt;Spec&lt;/code&gt;s, one for examples that &lt;em&gt;should match&lt;/em&gt; the regex
and one for examples that &lt;em&gt;should not&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Note that we imported and used &lt;code&gt;mediaRegex&lt;/code&gt; from module
&lt;code&gt;PCREHeavyExample&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Unlike in our example program yesterday, which used &lt;code&gt;scan&lt;/code&gt; from
&lt;code&gt;pcre-heavy&lt;/code&gt; to collect match bindings, we only care whether something
matched, so we use its &lt;code&gt;=~&lt;/code&gt; operator instead that takes an input
string and a regex, and returns a &lt;code&gt;Bool&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The test code is concise enough, and the problem domain well
understood enough, that even if the syntax looks strange, I hope it is
clear &lt;em&gt;what&lt;/em&gt; is going on, even if not clear &lt;em&gt;how&lt;/em&gt; it&amp;rsquo;s being done.&lt;/p&gt;

&lt;h3 id=&#34;a-note-on-syntax-in-haskell-code:740606311d3fcf0ba2f14607a358bd73&#34;&gt;A note on syntax in Haskell code&lt;/h3&gt;

&lt;p&gt;Now is a good time to talk about the issue of syntax in Haskell code,
because I&amp;rsquo;m expecting that if you are reading this, you might not
already be familiar with HSpec, and I also cannot assume that you are
already a seasoned Haskell developer, because I&amp;rsquo;m writing this article
series not for advanced Haskellers but for those starting to dip into
the library ecosystem and even friends with limited experience with
Haskell.&lt;/p&gt;

&lt;p&gt;It is convenient to use
&lt;a href=&#34;https://wiki.haskell.org/Section_of_an_infix_operator&#34;&gt;operator sectioning syntax&lt;/a&gt;
above, but I could have written&lt;/p&gt;

&lt;div class=&#34;highlight&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #0000FF&#34;&gt;text&lt;/span&gt; `shouldSatisfy` (&lt;span style=&#34;color: #0000FF&#34;&gt;\&lt;/span&gt;inputString &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;-&amp;gt;&lt;/span&gt; inputString &lt;span style=&#34;color: #666666&#34;&gt;=~&lt;/span&gt; mediaRegex)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Furthermore, it is also convenient to use
&lt;a href=&#34;https://wiki.haskell.org/Infix_operator&#34;&gt;infix syntax for named functions&lt;/a&gt;
when sensible, but it is not required. I could have written in
bare-bones style&lt;/p&gt;

&lt;div class=&#34;highlight&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #0000FF&#34;&gt;shouldSatisfy&lt;/span&gt; text (&lt;span style=&#34;color: #0000FF&#34;&gt;\&lt;/span&gt;inputString &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;-&amp;gt;&lt;/span&gt; inputString &lt;span style=&#34;color: #666666&#34;&gt;=~&lt;/span&gt; mediaRegex)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;And the cute &lt;code&gt;(not . (=~ mediaRegex))&lt;/code&gt; can be written as&lt;/p&gt;

&lt;div class=&#34;highlight&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #0000FF&#34;&gt;\&lt;/span&gt;inputString &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;-&amp;gt;&lt;/span&gt; not (inputString &lt;span style=&#34;color: #666666&#34;&gt;=~&lt;/span&gt; mediaRegex)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I mention these facts about syntax because I have often been told by
people looking into Haskell that it&amp;rsquo;s confusing because of all the
operator syntax. But you don&amp;rsquo;t have to use this syntax if you don&amp;rsquo;t
want to: much that looks weird in Haskell is not something about the
language itself, but just about optional syntax for which there is
&amp;ldquo;normal&amp;rdquo; syntax if you prefer that. It&amp;rsquo;s not just about operators, but
about a lot of other optional syntax as well; if you are still
relatively new to Haskell syntax, Gabriel Gonzalez wrote a nice
&amp;ldquo;syntax decoding&amp;rdquo; tutorial covering some of that
&lt;a href=&#34;http://www.haskellforall.com/2014/10/how-to-desugar-haskell-code.html&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;But saying &amp;ldquo;you don&amp;rsquo;t have to write it&amp;rdquo; is no use if &amp;ldquo;everyone is doing
it&amp;rdquo; and you have to &lt;em&gt;read&lt;/em&gt; it anyway. So it is the community as a whole
that sets the tone for what gets written and what gets read.&lt;/p&gt;

&lt;p&gt;One reason I like HSpec is that it does not go overboard with
syntax. &lt;a href=&#34;https://hackage.haskell.org/package/HUnit&#34;&gt;HUnit&lt;/a&gt;, an older
testing framework, provided funny operators that really turned me off,
such as
&lt;a href=&#34;https://hackage.haskell.org/package/HUnit-1.3.0.0/docs/Test-HUnit-Base.html&#34;&gt;&lt;code&gt;~=?&lt;/code&gt;&lt;/a&gt;. I
like Gabriel Gonzalez&amp;rsquo;s article
&lt;a href=&#34;http://www.haskellforall.com/2015/09/how-to-make-your-haskell-code-more.html&#34;&gt;&amp;ldquo;How to make your Haskell code more readable to non-Haskell programmers&amp;rdquo;&lt;/a&gt;. It
applies also to making the code more readable to experienced Haskell
programmers!&lt;/p&gt;

&lt;p&gt;I admit to having been guilty of some practices he calls out. I have
mixed feelings about giving them all up, all the time. For example, it
seems idiomatic to use the infix function operator &lt;code&gt;$&lt;/code&gt; for embedded
DSLs such HSpec, rather than parenthesize everything. I&amp;rsquo;m curious what
you think. Would you prefer to read the following, which is what the
&lt;code&gt;$&lt;/code&gt; operator avoids requiring?&lt;/p&gt;

&lt;div class=&#34;highlight&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #0000FF&#34;&gt;spec&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Spec&lt;/span&gt;
&lt;span style=&#34;color: #0000FF&#34;&gt;spec&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;=&lt;/span&gt;
  describe &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;pcre-heavy&amp;quot;&lt;/span&gt; (&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;do&lt;/span&gt;
    describe &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;match&amp;quot;&lt;/span&gt; (&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;do&lt;/span&gt;
      it &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;has audio&amp;quot;&lt;/span&gt; (&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;do&lt;/span&gt;
        &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;@Media:&lt;/span&gt;&lt;span style=&#34;color: #BB6622; font-weight: bold&#34;&gt;\t&lt;/span&gt;&lt;span style=&#34;color: #BA2121&#34;&gt;has-audio,   audio&amp;quot;&lt;/span&gt; `shouldSatisfy` (&lt;span style=&#34;color: #666666&#34;&gt;=~&lt;/span&gt; mediaRegex)
        )
      &lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;-- ...&lt;/span&gt;
      )
    describe &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;no match&amp;quot;&lt;/span&gt; (&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;do&lt;/span&gt;
      &lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;-- ...&lt;/span&gt;
      )
    )
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I personally think that languages with a &lt;code&gt;begin&lt;/code&gt;/&lt;code&gt;end&lt;/code&gt; kind of block
(such as Pascal, Ruby) instead of braces or parentheses have an
advantage because that is more readable (to me), and recent research
&lt;a href=&#34;http://dl.acm.org/citation.cfm?id=2534973&#34;&gt;&amp;ldquo;An empirical investigation into programming language syntax&amp;rdquo;&lt;/a&gt;
claims to have evidence of this.&lt;/p&gt;

&lt;p&gt;Meanwhile, we make do with the language we have, and learn and teach
its quirks and features. It&amp;rsquo;s regrettable that English and Chinese are
really hard languages to use too, but we make do if we want to be part
of the community in the United States or in China. It goes both ways:
if we want to be part of the community, we have to invest in
understanding how it operates, and if the community wants to grow, it
has to reach out to newcomers rather than just say &amp;ldquo;you&amp;rsquo;re on your
own, deal with it&amp;rdquo;. Think of the immense amount of effort that goes
into promoting universal literacy.&lt;/p&gt;

&lt;h3 id=&#34;a-one-minute-review-of-test-driven-development:740606311d3fcf0ba2f14607a358bd73&#34;&gt;A one-minute review of test-driven development&lt;/h3&gt;

&lt;p&gt;Let&amp;rsquo;s continue with the test writing process.&lt;/p&gt;

&lt;p&gt;When doing test-driven development, we write an HSpec spec first,
&lt;em&gt;before even writing any implementation code&lt;/em&gt;. Test-driven development is
where you show how something is supposed to work before you actually
write that something. In a typed setting, this means we get a
compile-time error when first trying to run the test, which we fix by
creating &lt;code&gt;PCREHeavyExample&lt;/code&gt; as a new module with a stub:&lt;/p&gt;

&lt;div class=&#34;highlight&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;module&lt;/span&gt; &lt;span style=&#34;color: #0000FF; font-weight: bold&#34;&gt;PCREHeavyExample&lt;/span&gt; (&lt;span style=&#34;color: #0000FF&#34;&gt;mediaRegex&lt;/span&gt;) &lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;where&lt;/span&gt;

&lt;span style=&#34;color: #0000FF&#34;&gt;mediaRegex&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;=&lt;/span&gt; undefined
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Of course, every test fails (in the terminal, the failures are
highlighted in red):&lt;/p&gt;

&lt;p&gt;&lt;div class=&#34;highlight&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #000080; font-weight: bold&#34;&gt;$&lt;/span&gt; stack &lt;span style=&#34;color: #008000&#34;&gt;test&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;PCREHeavyExample&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;  pcre-heavy&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;    match&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;      has audio FAILED [1]&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;      has video FAILED [2]&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;      has audio but missing FAILED [3]&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;      has video but unlinked FAILED [4]&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;    no match&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;      no audio or video FAILED [5]&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;      missing media field FAILED [6]&lt;/span&gt;

&lt;span style=&#34;color: #888888&#34;&gt;Failures:&lt;/span&gt;

&lt;span style=&#34;color: #888888&#34;&gt;  test/PCREHeavyExampleSpec.hs:13:&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;  1) PCREHeavyExample.pcre-heavy.match has audio&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;       uncaught exception: ErrorCall (Prelude.undefined)&lt;/span&gt;

&lt;span style=&#34;color: #888888&#34;&gt;  test/PCREHeavyExampleSpec.hs:15:&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;  2) PCREHeavyExample.pcre-heavy.match has video&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;       uncaught exception: ErrorCall (Prelude.undefined)&lt;/span&gt;

&lt;span style=&#34;color: #888888&#34;&gt;  test/PCREHeavyExampleSpec.hs:17:&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;  3) PCREHeavyExample.pcre-heavy.match has audio but missing&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;       uncaught exception: ErrorCall (Prelude.undefined)&lt;/span&gt;

&lt;span style=&#34;color: #888888&#34;&gt;  test/PCREHeavyExampleSpec.hs:19:&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;  4) PCREHeavyExample.pcre-heavy.match has video but unlinked&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;       uncaught exception: ErrorCall (Prelude.undefined)&lt;/span&gt;

&lt;span style=&#34;color: #888888&#34;&gt;  test/PCREHeavyExampleSpec.hs:22:&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;  5) PCREHeavyExample.pcre-heavy, no match, no audio or video&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;       uncaught exception: ErrorCall (Prelude.undefined)&lt;/span&gt;

&lt;span style=&#34;color: #888888&#34;&gt;  test/PCREHeavyExampleSpec.hs:24:&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;  6) PCREHeavyExample.pcre-heavy, no match, missing media field&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;       uncaught exception: ErrorCall (Prelude.undefined)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;

&lt;h4 id=&#34;a-tangent-on-ghc-s-error-reporting:740606311d3fcf0ba2f14607a358bd73&#34;&gt;A tangent on GHC&amp;rsquo;s error reporting&lt;/h4&gt;

&lt;p&gt;A super-annoying thing, and a long-standing embarrassment for GHC, is
that using &lt;code&gt;undefined&lt;/code&gt; doesn&amp;rsquo;t trigger useful error reporting. I
look forward to
&lt;a href=&#34;https://ghc.haskell.org/trac/ghc/wiki/Status/GHC-8.0.1&#34;&gt;GHC 8.0&lt;/a&gt;&amp;rsquo;s
new feature of
&lt;a href=&#34;https://ghc.haskell.org/trac/ghc/wiki/ExplicitCallStack/ImplicitLocations&#34;&gt;implicit parameters providing callstacks/source locations&lt;/a&gt;. This
stuff is important! It&amp;rsquo;s time we got line numbers and call stacks for
errors without having to jump through hoops.&lt;/p&gt;

&lt;h3 id=&#34;skipping-to-the-end-assume-we-finished-the-implementation:740606311d3fcf0ba2f14607a358bd73&#34;&gt;Skipping to the end, assume we finished the implementation&lt;/h3&gt;

&lt;p&gt;OK, let&amp;rsquo;s assume we finished the implementation, which is simply
writing the regex for &lt;code&gt;mediaRegex&lt;/code&gt;. Then the tests pass (and in the
terminal they display in green):&lt;/p&gt;

&lt;p&gt;&lt;div class=&#34;highlight&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #888888&#34;&gt;PCREHeavyExample&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;  pcre-heavy&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;    match&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;      has audio&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;      has video&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;      has audio but missing&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;      has video but unlinked&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;    no match&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;      no audio or video&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;      missing media field&lt;/span&gt;

&lt;span style=&#34;color: #888888&#34;&gt;Finished in 0.0010 seconds&lt;/span&gt;
&lt;span style=&#34;color: #888888&#34;&gt;6 examples, 0 failures&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;

&lt;h2 id=&#34;tests-are-code-too:740606311d3fcf0ba2f14607a358bd73&#34;&gt;Tests are code too!&lt;/h2&gt;

&lt;p&gt;It&amp;rsquo;s easy to not take test code seriously and not hold it up to the
same standards as &amp;ldquo;regular&amp;rdquo; code. That is a mistake: test code should
actually be cleaner and tighter than main implementation code because
it is our &lt;em&gt;executable documentation&lt;/em&gt; and what we need to make as easy
to read, write, and modify as requirements change.&lt;/p&gt;

&lt;h3 id=&#34;refactoring-part-1:740606311d3fcf0ba2f14607a358bd73&#34;&gt;Refactoring, part 1&lt;/h3&gt;

&lt;p&gt;Notice the tremendous amount of code duplication in the tests. We can
do better than this item-by-item copy-and-paste job. We can write code
to generate all the matching examples, by refactoring the relevant
data into a table and a function that maps over the table to get a
composite &lt;code&gt;Spec&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Here is a table that pairs a test description with each example input
string:&lt;/p&gt;

&lt;p&gt;&lt;div class=&#34;highlight&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #0000FF&#34;&gt;matchExamples&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;::&lt;/span&gt; [(&lt;span style=&#34;color: #B00040&#34;&gt;String&lt;/span&gt;, &lt;span style=&#34;color: #B00040&#34;&gt;String&lt;/span&gt;)]
&lt;span style=&#34;color: #0000FF&#34;&gt;matchExamples&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;=&lt;/span&gt;
  [ ( &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;has audio&amp;quot;&lt;/span&gt;
    , &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;@Media:&lt;/span&gt;&lt;span style=&#34;color: #BB6622; font-weight: bold&#34;&gt;\t&lt;/span&gt;&lt;span style=&#34;color: #BA2121&#34;&gt;has-audio,   audio&amp;quot;&lt;/span&gt;
    )
  , ( &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;has video&amp;quot;&lt;/span&gt;
    , &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;@Media:&lt;/span&gt;&lt;span style=&#34;color: #BB6622; font-weight: bold&#34;&gt;\t&lt;/span&gt;&lt;span style=&#34;color: #BA2121&#34;&gt;has-video,video&amp;quot;&lt;/span&gt;
    )
  , ( &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;has audio but missing&amp;quot;&lt;/span&gt;
    , &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;@Media:&lt;/span&gt;&lt;span style=&#34;color: #BB6622; font-weight: bold&#34;&gt;\t&lt;/span&gt;&lt;span style=&#34;color: #BA2121&#34;&gt;has-audio-but-missing, audio, missing&amp;quot;&lt;/span&gt;
    )
  , ( &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;has video but unlinked&amp;quot;&lt;/span&gt;
    , &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;@Media:&lt;/span&gt;&lt;span style=&#34;color: #BB6622; font-weight: bold&#34;&gt;\t&lt;/span&gt;&lt;span style=&#34;color: #BA2121&#34;&gt;has-video-but-unlinked  , video,      unlinked&amp;quot;&lt;/span&gt;
    )
  ]
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;

&lt;p&gt;Here is a function that generates a spec item given a description/input pair.&lt;/p&gt;

&lt;p&gt;&lt;div class=&#34;highlight&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #0000FF&#34;&gt;matchSpec&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;::&lt;/span&gt; (&lt;span style=&#34;color: #B00040&#34;&gt;String&lt;/span&gt;, &lt;span style=&#34;color: #B00040&#34;&gt;String&lt;/span&gt;) &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Spec&lt;/span&gt;
&lt;span style=&#34;color: #0000FF&#34;&gt;matchSpec&lt;/span&gt; (description, text) &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;=&lt;/span&gt;
  it description &lt;span style=&#34;color: #666666&#34;&gt;$&lt;/span&gt; &lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;do&lt;/span&gt;
    text `shouldSatisfy` (&lt;span style=&#34;color: #666666&#34;&gt;=~&lt;/span&gt; mediaRegex)
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;

&lt;p&gt;Similarly for the non-matching examples.&lt;/p&gt;

&lt;p&gt;And the refactored &lt;code&gt;Spec&lt;/code&gt;:&lt;/p&gt;

&lt;p&gt;&lt;div class=&#34;highlight&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #0000FF&#34;&gt;spec&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Spec&lt;/span&gt;
&lt;span style=&#34;color: #0000FF&#34;&gt;spec&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;=&lt;/span&gt;
  describe &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;pcre-heavy&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;$&lt;/span&gt; &lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;do&lt;/span&gt;
    describe &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;match&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;$&lt;/span&gt; &lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;do&lt;/span&gt;
      mapM_ matchSpec matchExamples
    describe &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;no match&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;$&lt;/span&gt; &lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;do&lt;/span&gt;
      mapM_ nonMatchSpec nonMatchExamples
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;

&lt;h3 id=&#34;refactoring-part-2:740606311d3fcf0ba2f14607a358bd73&#34;&gt;Refactoring, part 2&lt;/h3&gt;

&lt;p&gt;Uh oh, I said &amp;ldquo;similarly&amp;rdquo;. Usually when something is &amp;ldquo;similar&amp;rdquo;,
there&amp;rsquo;s more refactoring that might be doable.&lt;/p&gt;

&lt;p&gt;But &lt;strong&gt;Haskell makes refactoring joyful&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Haskell is a expressive language, where &amp;ldquo;might&amp;rdquo; usually means &amp;ldquo;can&amp;rdquo;,
and &amp;ldquo;can&amp;rdquo; often means &amp;ldquo;should&amp;rdquo;. In my experience, Haskell&amp;rsquo;s &lt;em&gt;single
best quality&lt;/em&gt; in terms of user experience is its support for
refactoring at will and with confidence that everything will still
mean exactly the same thing after as before the refactoring.&lt;/p&gt;

&lt;p&gt;I particularly look forward to the
ongoing development of a
&lt;a href=&#34;https://github.com/haskell/haskell-ide-engine&#34;&gt;universal Haskell IDE engine&lt;/a&gt;
refactoring even easier, e.g., folding in
&lt;a href=&#34;http://www.cs.kent.ac.uk/projects/refactor-fp/&#34;&gt;&lt;code&gt;HaRe&lt;/code&gt;&lt;/a&gt; support.&lt;/p&gt;

&lt;p&gt;We see a pattern of positive examples and negative examples using
a predicate and its negation. Let&amp;rsquo;s abstract this pattern out. Let&amp;rsquo;s
collect the positive and negative examples in one place. For
simplicity, let&amp;rsquo;s tuple them.&lt;/p&gt;

&lt;p&gt;And now that we&amp;rsquo;re dealing with arbitrary predicates, we no longer
have to hardcode &lt;code&gt;(=~ mediaRegex)&lt;/code&gt; or &lt;code&gt;String&lt;/code&gt; everywhere. We can &lt;em&gt;go
polymorphic&lt;/em&gt; in the predicate type, replacing &lt;code&gt;matchSpec&lt;/code&gt; and
&lt;code&gt;nonMatchSpec&lt;/code&gt; with a single &lt;code&gt;predSpec&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The final result:&lt;/p&gt;

&lt;p&gt;&lt;div class=&#34;highlight&#34; style=&#34;background: #f8f8f8&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #0000FF&#34;&gt;spec&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Spec&lt;/span&gt;
&lt;span style=&#34;color: #0000FF&#34;&gt;spec&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;=&lt;/span&gt;
  describePredicate &lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;pcre-heavy&amp;quot;&lt;/span&gt;
    (&lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;match&amp;quot;&lt;/span&gt;, (&lt;span style=&#34;color: #666666&#34;&gt;=~&lt;/span&gt; mediaRegex))
    (matchExamples, nonMatchExamples)

&lt;span style=&#34;color: #0000FF&#34;&gt;describePredicate&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Show&lt;/span&gt; a &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;=&amp;gt;&lt;/span&gt;
     &lt;span style=&#34;color: #B00040&#34;&gt;String&lt;/span&gt;                           &lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;-- ^ description&lt;/span&gt;
  &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;-&amp;gt;&lt;/span&gt; (&lt;span style=&#34;color: #B00040&#34;&gt;String&lt;/span&gt;, a &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Bool&lt;/span&gt;)              &lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;-- ^ (base description, predicate)&lt;/span&gt;
  &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;-&amp;gt;&lt;/span&gt; ( [(&lt;span style=&#34;color: #B00040&#34;&gt;String&lt;/span&gt;, a)], [(&lt;span style=&#34;color: #B00040&#34;&gt;String&lt;/span&gt;, a)] ) &lt;span style=&#34;color: #408080; font-style: italic&#34;&gt;-- ^ positive and negative examples&lt;/span&gt;
  &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Spec&lt;/span&gt;
&lt;span style=&#34;color: #0000FF&#34;&gt;describePredicate&lt;/span&gt; description
                  (baseDescription, predicate)
                  (positiveExamples, negativeExamples) &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;=&lt;/span&gt;
  describe description &lt;span style=&#34;color: #666666&#34;&gt;$&lt;/span&gt; &lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;do&lt;/span&gt;
    describe baseDescription &lt;span style=&#34;color: #666666&#34;&gt;$&lt;/span&gt; &lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;do&lt;/span&gt;
      mapM_ (predSpec predicate) positiveExamples
    describe (&lt;span style=&#34;color: #BA2121&#34;&gt;&amp;quot;not &amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;++&lt;/span&gt; baseDescription) &lt;span style=&#34;color: #666666&#34;&gt;$&lt;/span&gt; &lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;do&lt;/span&gt;
      mapM_ (predSpec (not &lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt; predicate)) negativeExamples

&lt;span style=&#34;color: #0000FF&#34;&gt;predSpec&lt;/span&gt; &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Show&lt;/span&gt; a &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;=&amp;gt;&lt;/span&gt; (a &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Bool&lt;/span&gt;) &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;-&amp;gt;&lt;/span&gt; (&lt;span style=&#34;color: #B00040&#34;&gt;String&lt;/span&gt;, a) &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color: #B00040&#34;&gt;Spec&lt;/span&gt;
&lt;span style=&#34;color: #0000FF&#34;&gt;predSpec&lt;/span&gt; predicate (description, a) &lt;span style=&#34;color: #AA22FF; font-weight: bold&#34;&gt;=&lt;/span&gt;
  it description &lt;span style=&#34;color: #666666&#34;&gt;$&lt;/span&gt; &lt;span style=&#34;color: #008000; font-weight: bold&#34;&gt;do&lt;/span&gt;
    a `shouldSatisfy` predicate
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;

&lt;p&gt;Note that &lt;code&gt;describePredicate&lt;/code&gt; and &lt;code&gt;predSpec&lt;/code&gt; can then be pulled out
into a test utilities module for use by other specs using the same
pattern.&lt;/p&gt;

&lt;p&gt;Unfortunately, this refactoring, although good in some ways, came with
a cost. It doesn&amp;rsquo;t look so great to me. Does it to you?&lt;/p&gt;

&lt;h3 id=&#34;refactoring-part-3:740606311d3fcf0ba2f14607a358bd73&#34;&gt;Refactoring, part 3?&lt;/h3&gt;

&lt;p&gt;One reason the refactored code doesn&amp;rsquo;t actually look so great now is
that our refactoring led to many nested primitive types
(&lt;a href=&#34;http://c2.com/cgi/wiki?PrimitiveObsession&#34;&gt;&amp;ldquo;primitive obsession&amp;rdquo;&lt;/a&gt;)
and an explosion in number of positional arguments to our new
&lt;code&gt;describePredicate&lt;/code&gt;. Let&amp;rsquo;s face it, calling &lt;code&gt;describePredicate&lt;/code&gt; is
cryptic, calling out for &amp;ldquo;keyword arguments&amp;rdquo; (in a language that
supports them).&lt;/p&gt;

&lt;p&gt;In Haskell, &amp;ldquo;keyword arguments&amp;rdquo; means there&amp;rsquo;s a configuration data
type crying to be defined. A related code smell is that documenting
the parameters to &lt;code&gt;describePredicate&lt;/code&gt; is now super-awkward. Each of
those parameters should be a thing in itself, not just parenthesized,
bracketed, tupled glop.&lt;/p&gt;

&lt;p&gt;If we are really serious about refactoring, we should wrap these
things into new data types that are an explicit model of what we want
to do when classifying and testing examples.  We might even turn the
whole thing into its own embedded sub-DSL of HSpec.&lt;/p&gt;

&lt;p&gt;This illustrates how refactoring can sometimes lead to new complexity
that didn&amp;rsquo;t exist before. There are tradeoffs constantly. Abstraction
for its own sake does not always make things clearer. For this reason,
I did not actually go this far initially for the example code
yesterday: I did not feel it was worth the trouble. I&amp;rsquo;ve left it in
the &lt;a href=&#34;https://github.com/FranklinChen/twenty-four-days2015-of-hackage/tree/refactoring-2&#34;&gt;&lt;code&gt;refactoring-2&lt;/code&gt;&lt;/a&gt; branch of the GitHub repo.&lt;/p&gt;

&lt;h2 id=&#34;combining-testing-frameworks:740606311d3fcf0ba2f14607a358bd73&#34;&gt;Combining testing frameworks&lt;/h2&gt;

&lt;p&gt;One last thing about HSpec: you can use it within a larger testing
framework, or you can embed another testing framework into it as
well. For example, I like to use
&lt;a href=&#34;http://hspec.github.io/quickcheck.html&#34;&gt;QuickCheck through HSpec&lt;/a&gt; as
part of &amp;ldquo;type-directed development&amp;rdquo;.&lt;/p&gt;

&lt;h2 id=&#34;conclusion:740606311d3fcf0ba2f14607a358bd73&#34;&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;Testing is important, but few love to do it. Making it easy to write
and use tests goes a long way toward actually doing it. I like HSpec
because it&amp;rsquo;s easy to write, and because of auto-discovery. I hope you
consider using it for your own projects if you don&amp;rsquo;t already use it or
some other testing framework.&lt;/p&gt;

&lt;h2 id=&#34;all-the-code:740606311d3fcf0ba2f14607a358bd73&#34;&gt;All the code&lt;/h2&gt;

&lt;p&gt;All my code for my article series are at
&lt;a href=&#34;https://github.com/FranklinChen/twenty-four-days2015-of-hackage&#34;&gt;this GitHub repo&lt;/a&gt;.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Pittsburgh Python: night of the favorite module</title>
      <link>http://conscientiousprogrammer.com/blog/2013/06/26/pittsburgh-python-night-of-the-favorite-module/</link>
      <pubDate>Wed, 26 Jun 2013 22:50:00 +0000</pubDate>
      
      <guid>http://conscientiousprogrammer.com/blog/2013/06/26/pittsburgh-python-night-of-the-favorite-module/</guid>
      <description>


&lt;figure &gt;
    
        &lt;img src=&#34;http://photos4.meetupstatic.com/photos/event/d/e/b/e/global_187797022.jpeg&#34; /&gt;
    
    
    &lt;figcaption&gt;
        &lt;h4&gt;Pittsburgh Python User Group&lt;/h4&gt;
        
    &lt;/figcaption&gt;
    
&lt;/figure&gt;


&lt;p&gt;The &lt;a href=&#34;http://www.meetup.com/pghpython/&#34;&gt;Pittsburgh Python User Group&lt;/a&gt; had &lt;a href=&#34;http://www.meetup.com/pghpython/events/120442102&#34;&gt;another &amp;ldquo;favorite module night&amp;rdquo;&lt;/a&gt;. I enjoy this format because I get to learn about what people find useful, so that I may perhaps use it myself!&lt;/p&gt;

&lt;h2 id=&#34;how-i-benefited-in-the-past:453716912359e60848a46333431abedc&#34;&gt;How I benefited in the past&lt;/h2&gt;

&lt;p&gt;For example, &lt;a href=&#34;http://franklinchen.com/blog/2012/08/23/pittsburgh-python-meetup-i-gave-my-first-lightning-talk-ever-the-topic-was-scons/&#34;&gt;one of these &amp;ldquo;favorite module night&amp;rdquo; sessions&lt;/a&gt; was where I learned about Kenneth Reitz&amp;rsquo;s &lt;code&gt;requests&lt;/code&gt; library. Very often it is easy to not be aware of the rapidly changing ecology of very useful libraries in a programming language ecosystem outside of the official &amp;ldquo;standard library&amp;rdquo;, especially when using a language that is &lt;em&gt;not&lt;/em&gt; one&amp;rsquo;s primary working language. For example, Python has never been one of my primary working languages, so I&amp;rsquo;m not as up to date on what all the best tools are to use. But just a couple of weeks ago, I had to do some work with Python, and &lt;code&gt;requests&lt;/code&gt; came in very handy.&lt;/p&gt;

&lt;h2 id=&#34;ipython-notebook-http-ipython-org-notebook-html:453716912359e60848a46333431abedc&#34;&gt;&lt;a href=&#34;http://ipython.org/notebook.html&#34;&gt;IPython Notebook&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;Josh Adelman opened the show-and-tell with a demo of &lt;a href=&#34;http://ipython.org/notebook.html&#34;&gt;IPython Notebook&lt;/a&gt;. This is a truly fantastic interactive environment for developing code while creating a full document for publication and sharing. He uses it not only for research but also for his students to use in his teaching.&lt;/p&gt;

&lt;p&gt;If you&amp;rsquo;ve used Mathematica, the concept is similar to that environment.&lt;/p&gt;

&lt;p&gt;I&amp;rsquo;m also excited that IPython Notebook has been the direct inspiration for similar projects for other languages, e.g., &lt;a href=&#34;https://github.com/Bridgewater/scala-notebook&#34;&gt;Scala Notebook&lt;/a&gt; for Scala in development.&lt;/p&gt;

&lt;p&gt;Josh gave a link to this &lt;a href=&#34;http://jakevdp.github.io/&#34;&gt;cool blog that uses IPython Notebook&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&#34;sentry-https-getsentry-com-welcome-and-raven-http-raven-readthedocs-org-en-latest:453716912359e60848a46333431abedc&#34;&gt;&lt;a href=&#34;https://getsentry.com/welcome/&#34;&gt;Sentry&lt;/a&gt; and &lt;a href=&#34;http://raven.readthedocs.org/en/latest/&#34;&gt;Raven&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;Nick Sloan presented on Sentry, a service for collecting errors in your program and notifying you of them, and Raven, the official Python client for Sentry. Sentry is actually open source, so you could host it yourself, but paying for the hosted service provides conveniences.&lt;/p&gt;

&lt;p&gt;Using Sentry is no more than using ordinary Python logging after calling a setup function. The ease of use made it sound like a winner.&lt;/p&gt;

&lt;h2 id=&#34;docopt-http-docopt-org:453716912359e60848a46333431abedc&#34;&gt;&lt;a href=&#34;http://docopt.org/&#34;&gt;docopt&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;Joe Esposito presented on &lt;code&gt;docopt&lt;/code&gt;, a library for command line parsing. The interesting thing about it is that it implements an &lt;em&gt;external&lt;/em&gt; domain-specific language for describing command lines: you write a usage message, as a string, and &lt;code&gt;docopt&lt;/code&gt; parses it in order to deduce what the expectations and constraints are. This is a very ambitious approach, contrary to the usual internal API-based approaches, some of which are sophisticated and implement an &lt;em&gt;internal&lt;/em&gt; domain-specific language.&lt;/p&gt;

&lt;p&gt;Of course, Joe contrasted this library with one of the standard command line parsing libraries for Python, &lt;code&gt;argparse&lt;/code&gt;, which is lower-level so that when you use it, the high-level end user usage is not as immediately readable.&lt;/p&gt;

&lt;p&gt;There were a lot of good questions about &lt;code&gt;docopt&lt;/code&gt; since it seemed magical. I&amp;rsquo;ve decided to write more about all this in a separate blog post about command line parsers.&lt;/p&gt;

&lt;h2 id=&#34;hypothesis-https-pypi-python-org-pypi-hypothesis:453716912359e60848a46333431abedc&#34;&gt;&lt;a href=&#34;https://pypi.python.org/pypi/hypothesis&#34;&gt;hypothesis&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;I gave a short 5-minute presentation on &lt;code&gt;hypothesis&lt;/code&gt;, a library in development for doing property-based testing, inspired by QuickCheck and ScalaCheck. As I have done recently when giving a much longer &lt;a href=&#34;http://franklinchen.com/blog/2013/04/11/my-pittsburgh-scala-meetup-talk-on-property-based-testing-using-scalacheck/&#34;&gt;talk on property-based testing using ScalaCheck&lt;/a&gt;, I focused on motivating the use of property-based testing as an addition to example-based testing.&lt;/p&gt;

&lt;p&gt;Materials for my lightning talk are &lt;a href=&#34;https://github.com/franklinchen/lightning-talk-on-hypothesis&#34;&gt;here&lt;/a&gt;, and my few slides are below:&lt;/p&gt;

&lt;p&gt;&lt;iframe src=&#34;http://www.slideshare.net/slideshow/embed_code/23548866&#34; width=&#34;427&#34; height=&#34;356&#34; frameborder=&#34;0&#34; marginwidth=&#34;0&#34; marginheight=&#34;0&#34; scrolling=&#34;no&#34; style=&#34;border:1px solid #CCC;border-width:1px 1px 0;margin-bottom:5px&#34; allowfullscreen webkitallowfullscreen mozallowfullscreen&gt; &lt;/iframe&gt; &lt;div style=&#34;margin-bottom:5px&#34;&gt; &lt;strong&gt; &lt;a href=&#34;http://www.slideshare.net/FranklinChen/handout-23548866&#34; title=&#34;5-minute intro to property-based testing in Python with hypothesis&#34; target=&#34;_blank&#34;&gt;5-minute intro to property-based testing in Python with hypothesis&lt;/a&gt; &lt;/strong&gt; from &lt;strong&gt;&lt;a href=&#34;http://www.slideshare.net/FranklinChen&#34; target=&#34;_blank&#34;&gt;Franklin Chen&lt;/a&gt;&lt;/strong&gt; &lt;/div&gt;&lt;/p&gt;

&lt;h2 id=&#34;itertools-http-docs-python-org-2-library-itertools-html:453716912359e60848a46333431abedc&#34;&gt;&lt;a href=&#34;http://docs.python.org/2/library/itertools.html&#34;&gt;&lt;code&gt;itertools&lt;/code&gt;&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;Tim Lesher talked about &lt;code&gt;itertools&lt;/code&gt;, a very useful part of the standard library that provides support for efficient functional programming idioms. Part of the efficiency comes from the use of iterators in order to avoid constructing intermediate lists; this is a way of simulating the lazy sequences that are standard in languages such as ML, Haskell, Scala, and Clojure.&lt;/p&gt;

&lt;p&gt;Tim noted that although &lt;code&gt;itertools&lt;/code&gt; is powerful, &amp;ldquo;don&amp;rsquo;t be stupid&amp;rdquo;: don&amp;rsquo;t write obscure-looking code with it just because you can.&lt;/p&gt;

&lt;p&gt;Josh noted that the documentation for &lt;code&gt;itertools&lt;/code&gt; is great, with recipes that show you not only how to do things, and also with code for the equivalent more complicated code that you would have to write if you didn&amp;rsquo;t use &lt;code&gt;itertools&lt;/code&gt;. I agree that the documentation for &lt;code&gt;itertools&lt;/code&gt; is a model of high-quality documentation for a library. Check it out, and use it!&lt;/p&gt;

&lt;h2 id=&#34;argparse-http-docs-python-org-dev-library-argparse-html:453716912359e60848a46333431abedc&#34;&gt;&lt;a href=&#34;http://docs.python.org/dev/library/argparse.html&#34;&gt;&lt;code&gt;argparse&lt;/code&gt;&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;Craig gave a little presentation on &lt;code&gt;argparse&lt;/code&gt;, the aforementioned standard library for command line parsing. He noted it was ironic that he had prepared to speak on it before Joe independently decided to talk about &lt;code&gt;docopt&lt;/code&gt;. (Actually, I like &lt;code&gt;argparse&lt;/code&gt; and had considered talking about it before Craig submitted it already.)&lt;/p&gt;

&lt;p&gt;One feature he uses from &lt;code&gt;argparse&lt;/code&gt; is the ability to create mutually exclusive groups. There was a question of whether this is supported in &lt;code&gt;docopt&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;As mentioned earlier, I&amp;rsquo;ll write more about both &lt;code&gt;argparse&lt;/code&gt; and &lt;code&gt;docopt&lt;/code&gt; in a separate blog post.&lt;/p&gt;

&lt;h2 id=&#34;the-python-standard-library-by-example-http-doughellmann-com-python-standard-library-by-example:453716912359e60848a46333431abedc&#34;&gt;&lt;a href=&#34;http://doughellmann.com/python-standard-library-by-example&#34;&gt;The Python Standard Library by Example&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;Someone shared not a &amp;ldquo;favorite module&amp;rdquo;, but a favorite book, &amp;ldquo;The Python Standard Library by Example&amp;rdquo;. I&amp;rsquo;m happy he did, because it is in fact an excellent reference for anyone using the Python standard library, with concrete examples that you can take and use. Too often, I have found that standard documentation is too terse.&lt;/p&gt;

&lt;p&gt;The book is based on &lt;a href=&#34;http://pymotw.com/2/&#34;&gt;&amp;ldquo;Python Module of the Week&amp;rdquo;&lt;/a&gt;, which is a great online resource.&lt;/p&gt;

&lt;h2 id=&#34;introductions-for-new-people:453716912359e60848a46333431abedc&#34;&gt;Introductions for new people&lt;/h2&gt;

&lt;p&gt;An important part of the vibe of the Pittsburgh Python User Group is how it tries to get everyone actively involved in the local Python community.&lt;/p&gt;

&lt;p&gt;There is a tradition of periodically having everyone introduce themselves, to counter the tendency sometimes in these kinds of groups for people to attend a meeting out of curiosity and then silently leave and perhaps not come back, out of intimidation or not knowing how to benefit or contribute. I know I have done that before, especially when attending the meeting of a group where I didn&amp;rsquo;t really know anybody ahead of time and still knew very little about the topics discussed by the group (such as when I joined the Pittsburgh Ruby group as one who had barely used any Ruby).&lt;/p&gt;

&lt;p&gt;Since so many people showed up, and a lot seemed to be new faces, we had a round of introductions. I hope we&amp;rsquo;ll continue to see some of these new faces in the future!&lt;/p&gt;

&lt;h2 id=&#34;conclusion:453716912359e60848a46333431abedc&#34;&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;Thanks again to Google Pittsburgh for hosting the Pittsburgh Python User Group meeting, and Steve Gross of Google for being the guy who makes it able for us to meet there!&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>