<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>The Conscientious Programmer &middot; Franklin Chen</title>

  
  <link rel="stylesheet" href="http://ConscientiousProgrammer.com/css/poole.css">
  <link rel="stylesheet" href="http://ConscientiousProgrammer.com/css/hyde.css">
  <link rel="stylesheet" href="http://ConscientiousProgrammer.com/css/poole-overrides.css">
  <link rel="stylesheet" href="http://ConscientiousProgrammer.com/css/hyde-overrides.css">
  <link rel="stylesheet" href="http://ConscientiousProgrammer.com/css/hyde-x.css">

  <link rel="stylesheet" href="http://ConscientiousProgrammer.com/css/franklin.css">

  
  <link href='http://fonts.googleapis.com/css?family=Droid+Serif:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://ConscientiousProgrammer.com/touch-icon-144-precomposed.png">
  <link href="http://ConscientiousProgrammer.com/favicon.png" rel="icon">

  
  
  
  <link href="http://ConscientiousProgrammer.com/index.xml" rel="alternate" type="application/rss+xml" title="The Conscientious Programmer &middot; Franklin Chen" />

  <meta name="description" content="Franklin Chen&#39;s thoughts about computer programming">
  <meta name="keywords" content="Franklin Chen, programming, blog">
  <link rel="author" href="http://plus.google.com/100967806642012078047">
</head>
<body class="theme-base-0e">
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
        
        <h1>The Conscientious Programmer</h1>
        <p class="lead">Humbly exploring what it means to do the right thing.</p>
    </div>

    <ul class="sidebar-nav">
        
        <li class="sidebar-nav-item"><a href="http://ConscientiousProgrammer.com/about/">About</a></li>
        
        <li class="sidebar-nav-item"><a href="http://franklinchen.com/">Non-programming blog</a></li>
    </ul>

    <ul class="sidebar-nav">
        <li class="sidebar-nav-item">
            <a href="https://github.com/FranklinChen"><i class="fa fa-github-square fa-3x"></i></a>
            
            
            <a href="http://www.linkedin.com/in/franklinchen"><i class="fa fa-linkedin-square fa-3x"></i></a>
            <a href="http://google.com/&#43;FranklinChen"><i class="fa fa-google-plus-square fa-3x"></i></a>
            <a href="http://www.facebook.com/franklin.chen"><i class="fa fa-facebook-square fa-3x"></i></a>
            <a href="http://twitter.com/franklinchen"><i class="fa fa-twitter-square fa-3x"></i></a>
            <a href="http://www.youtube.com/user/FranklinChen"><i class="fa fa-youtube-square fa-3x"></i></a>
            <a href="http://ConscientiousProgrammer.com/atom.xml" type="application/rss+xml"><i class="fa fa-rss-square fa-3x"></i></a>
        </li>
    </ul>

    

    <p>Copyright &copy; 2015 Franklin Chen<br/>
       Powered by <a href="http://gohugo.io">Hugo</a> and <a href="https://github.com/zyro/hyde-x">Hyde-X</a></p>
  </div>
</div>


<div class="content container">
  <div class="posts">
    
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://conscientiousprogrammer.com/blog/2015/12/13/24-days-of-hackage-2015-day-13-hint-runtime-eval-for-haskell/">24 days of Hackage, 2015: day 13: hint: runtime eval for Haskell</a>
      </h1>
      <span class="post-date">Dec 13, 2015 &middot; 6 minute read &middot; <a href="http://conscientiousprogrammer.com/blog/2015/12/13/24-days-of-hackage-2015-day-13-hint-runtime-eval-for-haskell/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="http://ConscientiousProgrammer.com/categories/haskell">Haskell</a><a class="label" href="http://ConscientiousProgrammer.com/categories/hackage">Hackage</a><a class="label" href="http://ConscientiousProgrammer.com/categories/hint">hint</a><a class="label" href="http://ConscientiousProgrammer.com/categories/eval">eval</a><a class="label" href="http://ConscientiousProgrammer.com/categories/dynamic">dynamic</a><a class="label" href="http://ConscientiousProgrammer.com/categories/ghc">GHC</a><a class="label" href="http://ConscientiousProgrammer.com/categories/lisp">Lisp</a><a class="label" href="http://ConscientiousProgrammer.com/categories/javascript">JavaScript</a><a class="label" href="http://ConscientiousProgrammer.com/categories/java">Java</a>
      </span>
      
      <h2 id="table-of-contents-for-the-whole-series:4ffc4d1fd7325e3ed1c68dabc85f2632">Table of contents for the whole series</h2>

<p>A table of contents is at the top of the article for <a href="./blog/2015/11/30/haskell-tidbits-24-days-of-hackage-2015-day-1-introduction-and-stack/">day 1</a>.</p>

<h2 id="day-13:4ffc4d1fd7325e3ed1c68dabc85f2632">Day 13</h2>

<p>One hallmark of a &ldquo;dynamic language&rdquo; such as Lisp and JavaScript is
the ability to evaluate code at runtime inside a running
process. Since runtime loading of classes is a fundamental feature of
Java, is Java a &ldquo;dynamic language&rdquo; then? I think the terms &ldquo;static
language&rdquo; and &ldquo;dynamic language&rdquo; are not very useful terms, and a
comparison of language and compiler and development environments
should focus on specific features of the user experience and where the
boundaries lie in the semantics. One tricky thing is that a lot of
what is interesting is actually implementation-dependent.</p>

<p>For example, the Haskell standard says nothing about runtime <code>eval</code>,
so there is some sense in which Haskell considered as a strictly
defined &ldquo;language&rdquo; has no support for it. But if we consider the GHC
implementation and its ecosystem, which is dominant today despite the
existence of other Haskell implementations, there&rsquo;s a lot of tooling
that is &ldquo;dynamic&rdquo;, in the sense of being able to access GHC APIs in
one of many different ways.</p>

<p>Edward Yang recently wrote an interesting blog post
<a href="http://blog.ezyang.com/2015/12/the-convergence-of-compilers-build-systems-and-package-managers/">&ldquo;The convergence of compilers, build systems and package managers&rdquo;</a>
on a subset of the general issue of what can access what for the sake
of tooling. It didn&rsquo;t touch on runtime evaluation, which is an entire
topic in itself.</p>

<p>For today, I decided to mention that you can already do runtime eval
of GHC Haskell code using the package
<a href="http://hackage.haskell.org/package/hint"><code>hint</code></a> and offer the
thought that maybe we might want something less ad hoc than
third-party packages like this.</p>

      <a href="http://conscientiousprogrammer.com/blog/2015/12/13/24-days-of-hackage-2015-day-13-hint-runtime-eval-for-haskell/">Read On &rarr;</a>
      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://conscientiousprogrammer.com/blog/2015/12/12/24-days-of-hackage-2015-day-12-json-autotype-inferring-types-from-data/">24 days of Hackage, 2015: day 12: json-autotype: inferring types from data</a>
      </h1>
      <span class="post-date">Dec 12, 2015 &middot; 6 minute read &middot; <a href="http://conscientiousprogrammer.com/blog/2015/12/12/24-days-of-hackage-2015-day-12-json-autotype-inferring-types-from-data/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="http://ConscientiousProgrammer.com/categories/haskell">Haskell</a><a class="label" href="http://ConscientiousProgrammer.com/categories/hackage">Hackage</a><a class="label" href="http://ConscientiousProgrammer.com/categories/aeson">aeson</a><a class="label" href="http://ConscientiousProgrammer.com/categories/json-autotype">json-autotype</a><a class="label" href="http://ConscientiousProgrammer.com/categories/json">JSON</a><a class="label" href="http://ConscientiousProgrammer.com/categories/inference">inference</a><a class="label" href="http://ConscientiousProgrammer.com/categories/type-providers">type providers</a><a class="label" href="http://ConscientiousProgrammer.com/categories/f">F#</a>
      </span>
      
      <h2 id="table-of-contents-for-the-whole-series:33f1fa328e93fa7d82a0bc799e461364">Table of contents for the whole series</h2>

<p>A table of contents is at the top of the article for <a href="./blog/2015/11/30/haskell-tidbits-24-days-of-hackage-2015-day-1-introduction-and-stack/">day 1</a>.</p>

<h2 id="day-12:33f1fa328e93fa7d82a0bc799e461364">Day 12</h2>

<p>Today we revisit a problem from
<a href="./blog/2015/12/04/24-days-of-hackage-2015-day-4-wreq-web-client-programming-with-notes-on-lens-and-operator-syntax/">day 4</a>,
in which we grabbed JSON off the Web in order to extract information
about it. I mentioned then that we were using an untyped
representation for JSON. Ideally, if it&rsquo;s not too onerous, we want to
use a typed representation for our data, to avoid common errors such
as trying to access a nonexistent field. The Aeson library allows us
to write our own data types and convert them from and to JSON. If we
were in charge of the data and data format, then this would be the way
to go.</p>

<p>But what if, for whatever reason, we do not already have a typed data
model, but are consuming, for example, JSON from a source that has not
given us a spec of the data types, maybe with JSON Schema? Then we
have to reverse-engineer the data types, possibly from an informal text
spec of the format (which is a real pain).</p>

<p>Or we could take a lazy way out, and <em>infer</em> plausible types from a
corpus of representative data. This is what the useful
<a href="http://hackage.haskell.org/package/json-autotype"><code>json-autotype</code></a>
package does (<a href="https://github.com/mgajda/json-autotype">documentation on the GitHub repo page</a>).</p>

      <a href="http://conscientiousprogrammer.com/blog/2015/12/12/24-days-of-hackage-2015-day-12-json-autotype-inferring-types-from-data/">Read On &rarr;</a>
      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://conscientiousprogrammer.com/blog/2015/12/11/24-days-of-hackage-2015-day-11-monad-loops-avoiding-writing-recursive-functions-by-refactoring/">24 days of Hackage, 2015: day 11: monad-loops: avoiding writing recursive functions by refactoring</a>
      </h1>
      <span class="post-date">Dec 11, 2015 &middot; 8 minute read &middot; <a href="http://conscientiousprogrammer.com/blog/2015/12/11/24-days-of-hackage-2015-day-11-monad-loops-avoiding-writing-recursive-functions-by-refactoring/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="http://ConscientiousProgrammer.com/categories/haskell">Haskell</a><a class="label" href="http://ConscientiousProgrammer.com/categories/hackage">Hackage</a><a class="label" href="http://ConscientiousProgrammer.com/categories/recursion">recursion</a><a class="label" href="http://ConscientiousProgrammer.com/categories/monad-loops">monad-loops</a>
      </span>
      
      <h2 id="table-of-contents-for-the-whole-series:dca87c7fcd1d9eced1add38ac79eca8c">Table of contents for the whole series</h2>

<p>A table of contents is at the top of the article for <a href="./blog/2015/11/30/haskell-tidbits-24-days-of-hackage-2015-day-1-introduction-and-stack/">day 1</a>.</p>

<h2 id="day-11:dca87c7fcd1d9eced1add38ac79eca8c">Day 11</h2>

<p>I often dislike writing recursive functions. Recursion is a form of
<code>goto</code> and therefore recursion is, conceptually, the assembly
language low-level infrastructure of functional programming, a
fundamental building block but not necessarily something I want to see
every day.</p>

<p>An analogy: imperative programming in the 1960s was altered
significantly when brand new control structures such as <code>for</code> and
<code>while</code> loops changed the face of imperative programming by removing
the boilerplate of using the low-level <code>goto</code> everywhere; <code>for</code> and
<code>while</code> are the higher-order control structures of imperative programming.</p>

<p>In functional programming, recursion boilerplate is avoided through
writing and using higher-order functions such as <code>map</code>,<code>filter</code>,
<code>foldr</code>, and <code>traverse</code>. The cool thing is that in functional
programming, these are ordinary user-space functions, whereas in
imperative programming, the control structures are built into the
language and it&rsquo;s typically not so easy to invent your own.</p>

<p>Why would you want to define control structures yourself? I&rsquo;ll show
examples and a useful little library
<a href="https://hackage.haskell.org/package/monad-loops"><code>monad-loops</code></a> that
you can use in order to avoid reinventing the wheel.</p>

      <a href="http://conscientiousprogrammer.com/blog/2015/12/11/24-days-of-hackage-2015-day-11-monad-loops-avoiding-writing-recursive-functions-by-refactoring/">Read On &rarr;</a>
      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://conscientiousprogrammer.com/blog/2015/12/10/24-days-of-hackage-2015-day-10-s-cargot-using-s-expression-syntax/">24 days of Hackage, 2015: day 10: s-cargot: using S-expression syntax</a>
      </h1>
      <span class="post-date">Dec 10, 2015 &middot; 14 minute read &middot; <a href="http://conscientiousprogrammer.com/blog/2015/12/10/24-days-of-hackage-2015-day-10-s-cargot-using-s-expression-syntax/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="http://ConscientiousProgrammer.com/categories/haskell">Haskell</a><a class="label" href="http://ConscientiousProgrammer.com/categories/hackage">Hackage</a><a class="label" href="http://ConscientiousProgrammer.com/categories/lisp">Lisp</a><a class="label" href="http://ConscientiousProgrammer.com/categories/scheme">Scheme</a><a class="label" href="http://ConscientiousProgrammer.com/categories/s-cargot">s-cargot</a><a class="label" href="http://ConscientiousProgrammer.com/categories/s-expressions">S-expressions</a><a class="label" href="http://ConscientiousProgrammer.com/categories/domain-specific-language">domain-specific language</a><a class="label" href="http://ConscientiousProgrammer.com/categories/parsers">parsers</a><a class="label" href="http://ConscientiousProgrammer.com/categories/parsec">parsec</a>
      </span>
      
      <h2 id="table-of-contents-for-the-whole-series:6004f4e5d78ba4d157aa1a919a6f7cf7">Table of contents for the whole series</h2>

<p>A table of contents is at the top of the article for <a href="./blog/2015/11/30/haskell-tidbits-24-days-of-hackage-2015-day-1-introduction-and-stack/">day 1</a>.</p>

<h2 id="day-10:6004f4e5d78ba4d157aa1a919a6f7cf7">Day 10</h2>

<p>There are times when I&rsquo;m jealous of the Lisp world.</p>

<p>One of those times is when defining some domain-specific language,
because in the Lisp world, the natural thing to do is to represent it
using S-expressions as the concrete syntax, and not fuss with defining
yet another special syntax, along with writing a parser for that
syntax into the abstract syntax as well as a pretty-printer from the
abstract syntax back to the concrete syntax. Maybe in the long run
users might want a special syntax that is not just S-expressions, but
for quick initial prototyping, at least, it seems worthwhile to not
commit to any special syntax and just use S-expressions. Although
there is nothing magical about S-expressions (or XML or JSON or any
other generic representation of a tree data structure), they are
particularly concise and flexible.</p>

<p>S-expressions are so useful that in my first job as a software
engineer in the 1990s, we actually had a C++ S-expression library for
input and output of a format that amounted to a domain-specific
language (this was before XML was invented) that was processed by many
tools (including a validator that I wrote in Standard ML).</p>

<p>A library on Hackage for working with S-expressions in Haskell is
<a href="http://hackage.haskell.org/package/s-cargot"><code>s-cargot</code></a>. There have
been many others, but most of them have gone sadly unmaintained,
whereas this one is new and comes with bells and whistles.</p>

<p>Today I&rsquo;ll give an example of how to use this library, in the context
of a problem domain in which having a concrete syntax is important.</p>

      <a href="http://conscientiousprogrammer.com/blog/2015/12/10/24-days-of-hackage-2015-day-10-s-cargot-using-s-expression-syntax/">Read On &rarr;</a>
      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://conscientiousprogrammer.com/blog/2015/12/09/24-days-of-hackage-2015-day-9-template-haskell-goodies-here-interpolate-file-embed/">24 days of Hackage, 2015: day 9: Template Haskell goodies: here, interpolate, file-embed</a>
      </h1>
      <span class="post-date">Dec 9, 2015 &middot; 3 minute read &middot; <a href="http://conscientiousprogrammer.com/blog/2015/12/09/24-days-of-hackage-2015-day-9-template-haskell-goodies-here-interpolate-file-embed/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="http://ConscientiousProgrammer.com/categories/haskell">Haskell</a><a class="label" href="http://ConscientiousProgrammer.com/categories/hackage">Hackage</a><a class="label" href="http://ConscientiousProgrammer.com/categories/template-haskell">Template Haskell</a><a class="label" href="http://ConscientiousProgrammer.com/categories/here">here</a><a class="label" href="http://ConscientiousProgrammer.com/categories/interpolate">interpolate</a><a class="label" href="http://ConscientiousProgrammer.com/categories/file-embed">file-embed</a><a class="label" href="http://ConscientiousProgrammer.com/categories/strings">strings</a>
      </span>
      
      <h2 id="table-of-contents-for-the-whole-series:8eaddb149d77042401ce1f324517c8ca">Table of contents for the whole series</h2>

<p>A table of contents is at the top of the article for <a href="./blog/2015/11/30/haskell-tidbits-24-days-of-hackage-2015-day-1-introduction-and-stack/">day 1</a>.</p>

<h2 id="day-9:8eaddb149d77042401ce1f324517c8ca">Day 9</h2>

<p>A stray negative remark I made on
<a href="./blog/2015/12/08/24-days-of-hackage-2015-day-8-multiset-i-wish-this-were-in-the-standard-containers-package/">day 8</a>
regarding Haskell and its unergonomic support for multi-line string
literals and interpolation led to good comments that I was being
misleading because there actually exist good solutions. I already use
one of them, but had not brought them into the picture because I
didn&rsquo;t want to be distracting in that post by bringing in other
libraries, especially since they are implemented in
<a href="https://wiki.haskell.org/Template_Haskell">Template Haskell</a>, the GHC
extension that is &ldquo;macros for Haskell&rdquo;, enabling compile-time
metaprogramming (see the
<a href="https://ocharles.org.uk/blog/guest-posts/2014-12-22-template-haskell.html">2014 Day of Hackage article about Template Haskell</a>. On
<a href="./blog/2015/12/02/24-days-of-hackage-2015-day-2-regexes-with-pcre-heavy-standalone-haskell-scripts-using-stack/">day 2</a>
I already introduced a package that uses Template Haskell, so it looks
like I&rsquo;ll be continuing to do that today.</p>

<p>These packages require only that you turn on <code>QuasiQuotes</code> in modules
where you use them, so our example source code will have the header</p>

<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #408080; font-style: italic">{-# LANGUAGE QuasiQuotes #-}</span>
</pre></div>


      <a href="http://conscientiousprogrammer.com/blog/2015/12/09/24-days-of-hackage-2015-day-9-template-haskell-goodies-here-interpolate-file-embed/">Read On &rarr;</a>
      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://conscientiousprogrammer.com/blog/2015/12/08/24-days-of-hackage-2015-day-8-multiset-i-wish-this-were-in-the-standard-containers-package/">24 days of Hackage, 2015: day 8: multiset; I wish this were in the standard containers package</a>
      </h1>
      <span class="post-date">Dec 8, 2015 &middot; 7 minute read &middot; <a href="http://conscientiousprogrammer.com/blog/2015/12/08/24-days-of-hackage-2015-day-8-multiset-i-wish-this-were-in-the-standard-containers-package/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="http://ConscientiousProgrammer.com/categories/haskell">Haskell</a><a class="label" href="http://ConscientiousProgrammer.com/categories/hackage">Hackage</a><a class="label" href="http://ConscientiousProgrammer.com/categories/multiset">multiset</a><a class="label" href="http://ConscientiousProgrammer.com/categories/containers">containers</a><a class="label" href="http://ConscientiousProgrammer.com/categories/text">text</a><a class="label" href="http://ConscientiousProgrammer.com/categories/sorting">sorting</a><a class="label" href="http://ConscientiousProgrammer.com/categories/builder-pattern">builder pattern</a>
      </span>
      
      <h2 id="table-of-contents-for-the-whole-series:2fc978f0a24d72120da8b6255ca644c0">Table of contents for the whole series</h2>

<p>A table of contents is at the top of the article for <a href="./blog/2015/11/30/haskell-tidbits-24-days-of-hackage-2015-day-1-introduction-and-stack/">day 1</a>.</p>

<h2 id="day-8:2fc978f0a24d72120da8b6255ca644c0">Day 8</h2>

<p>I don&rsquo;t remember when it was, but one day I got sick and tired of
reimplementing in Haskell the same boilerplate logic when keeping
track of many objects classified under the same key. This is a data
structure known as a
<a href="https://en.wikipedia.org/wiki/Multiset">multiset</a>, also known as a
<em>bag</em>, in contrast with a regular <em>set</em>, which only keeps track of one
unique object per key.</p>

<p>I was surprised that by the lack of a multiset module in the standard
<a href="https://hackage.haskell.org/package/containers"><code>containers</code></a>
package, although not completely surprised because you can implement a
multiset on top of a set, so in some sense a multiset is
&ldquo;superfluous&rdquo;. Still, I was used to having a multiset available
without any work (however trivial), because of long using a <a href="http://www.cplusplus.com/reference/set/multiset/">multiset
in C++</a>, which I&rsquo;d
used back in the 1990s from the original implementation of the
<a href="https://en.wikipedia.org/wiki/Standard_Template_Library">Standard Template Library</a>,
and also Python&rsquo;s collections library has a
<a href="https://docs.python.org/2/library/collections.html#collections.Counter"><code>Counter</code></a>
class which serves a similar purpose.</p>

<p>Today I&rsquo;ll briefly show some code using <code>multiset</code> and talk about why
something like this maybe should be in the standard library.</p>

      <a href="http://conscientiousprogrammer.com/blog/2015/12/08/24-days-of-hackage-2015-day-8-multiset-i-wish-this-were-in-the-standard-containers-package/">Read On &rarr;</a>
      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://conscientiousprogrammer.com/blog/2015/12/07/24-days-of-hackage-2015-day-7-semigroups-nonempty-list-and-a-case-study-of-types-and-tests/">24 days of Hackage, 2015: day 7: semigroups; NonEmpty list and a case study of types and tests</a>
      </h1>
      <span class="post-date">Dec 7, 2015 &middot; 16 minute read &middot; <a href="http://conscientiousprogrammer.com/blog/2015/12/07/24-days-of-hackage-2015-day-7-semigroups-nonempty-list-and-a-case-study-of-types-and-tests/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="http://ConscientiousProgrammer.com/categories/haskell">Haskell</a><a class="label" href="http://ConscientiousProgrammer.com/categories/hackage">Hackage</a><a class="label" href="http://ConscientiousProgrammer.com/categories/semigroups">semigroups</a><a class="label" href="http://ConscientiousProgrammer.com/categories/nonempty-lists">nonempty lists</a><a class="label" href="http://ConscientiousProgrammer.com/categories/"></a><a class="label" href="http://ConscientiousProgrammer.com/categories/types">types</a><a class="label" href="http://ConscientiousProgrammer.com/categories/parsec">parsec</a><a class="label" href="http://ConscientiousProgrammer.com/categories/monoids">monoids</a><a class="label" href="http://ConscientiousProgrammer.com/categories/algebra">algebra</a><a class="label" href="http://ConscientiousProgrammer.com/categories/split">split</a><a class="label" href="http://ConscientiousProgrammer.com/categories/safe">safe</a>
      </span>
      
      <h2 id="table-of-contents-for-the-whole-series:958db8f82ca76230f48a5dece0db5e88">Table of contents for the whole series</h2>

<p>A table of contents is at the top of the article for <a href="./blog/2015/11/30/haskell-tidbits-24-days-of-hackage-2015-day-1-introduction-and-stack/">day 1</a>.</p>

<h2 id="day-7:958db8f82ca76230f48a5dece0db5e88">Day 7</h2>

<p>How often has the following runtime error happened to you, whether in
Haskell or in some other language?</p>

<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #888888">*** Exception: Prelude.head: empty list</span>
</pre></div>


<p>Basically, code blew up that assumed a list was nonempty but it
wasn&rsquo;t.</p>

<p>In fact,
<a href="https://www.reddit.com/r/haskell/comments/3vlb8v/reading_data_problems/">posted on Reddit recently</a>
was a question about code that failed with</p>

<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #888888">** Exception: Prelude.foldl1: empty list</span>
</pre></div>


<p>which is the same problem.</p>

<p>Today, I present a case study: refactoring that code to take advantage
of an important data type that is going to be part of the Haskell
standard library, the <code>NonEmpty</code> list type. This is part of Edward
Kmett&rsquo;s <a href="http://hackage.haskell.org/package/semigroups"><code>semigroups</code></a>
package that is
<a href="https://prime.haskell.org/wiki/Libraries/Proposals/SemigroupMonoid">going into the standard library</a>.</p>

      <a href="http://conscientiousprogrammer.com/blog/2015/12/07/24-days-of-hackage-2015-day-7-semigroups-nonempty-list-and-a-case-study-of-types-and-tests/">Read On &rarr;</a>
      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://conscientiousprogrammer.com/blog/2015/12/06/24-days-of-hackage-2015-day-6-finding-utilities-with-hoogle-and-hayoo-missingh-extra/">24 days of Hackage, 2015: day 6: finding utilities with Hoogle and Hayoo: MissingH, extra</a>
      </h1>
      <span class="post-date">Dec 6, 2015 &middot; 8 minute read &middot; <a href="http://conscientiousprogrammer.com/blog/2015/12/06/24-days-of-hackage-2015-day-6-finding-utilities-with-hoogle-and-hayoo-missingh-extra/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="http://ConscientiousProgrammer.com/categories/haskell">Haskell</a><a class="label" href="http://ConscientiousProgrammer.com/categories/hackage">Hackage</a><a class="label" href="http://ConscientiousProgrammer.com/categories/hoogle">Hoogle</a><a class="label" href="http://ConscientiousProgrammer.com/categories/hayoo">Hayoo</a><a class="label" href="http://ConscientiousProgrammer.com/categories/utilities">utilities</a><a class="label" href="http://ConscientiousProgrammer.com/categories/missingh">MissingH</a><a class="label" href="http://ConscientiousProgrammer.com/categories/extra">extra</a><a class="label" href="http://ConscientiousProgrammer.com/categories/higher-rank-types">higher-rank types</a><a class="label" href="http://ConscientiousProgrammer.com/categories/purescript">PureScript</a>
      </span>
      
      <h2 id="table-of-contents-for-the-whole-series:d5469b5c0bbdfa17c4766f6abf5754f6">Table of contents for the whole series</h2>

<p>A table of contents is at the top of the article for <a href="./blog/2015/11/30/haskell-tidbits-24-days-of-hackage-2015-day-1-introduction-and-stack/">day 1</a>.</p>

<h2 id="day-6:d5469b5c0bbdfa17c4766f6abf5754f6">Day 6</h2>

<p>It will never be the case that everything everyone will find useful
will already be in the &ldquo;standard library&rdquo; for any language
ecosystem. However, one of the coolest features of the Haskell
ecosystem (which wows all non-Haskellers when I show them), is the ability to search for useful functions by type
signature, using <a href="http://hoogle.haskell.org/"><code>Hoogle</code></a> or
<a href="http://hayoo.fh-wedel.de/examples"><code>Hayoo</code></a>. You can use other
criteria also, such as names; this can be useful if you have a guess
at what some useful function might be named.</p>

<p>There seem to be two philosophies as far as using other people&rsquo;s
utility libraries (or even making one&rsquo;s own to share between different
projects):</p>

<ul>
<li>reuse is great, let&rsquo;s do it</li>
<li>every dependency is a potential liability, so it&rsquo;s better to
reinvent, or copy and paste, rather than use something of uncertain
quality or maintainability</li>
</ul>

<p>I tend to prefer reuse, but there have been times when I have copied
(and even modified) only just what I need, because I don&rsquo;t want the
rest of what is inside a sprawling library that depends transitively
on a whole lot of stuff I don&rsquo;t need. I think this is a granularity
issue. Many people have proposed the idea that since we have a Web
now, in theory the concept of &ldquo;library&rdquo; should go obsolete in favor of
micro-libraries, so to speak, maybe sometimes even to the level of
single standalone functions, and maybe even having a unique
identifier, but this topic is outside the scope of this article. (For
just one idea, check out Gabriel Gonzalez&rsquo;s
<a href="http://www.haskellforall.com/2015/05/the-internet-of-code.html">&ldquo;The internet of code&rdquo;</a>.)</p>

<p>The situation is also complicated by the fact that often, so much can
be reinvented with only a couple of lines of Haskell code, so why even
bother looking for someone&rsquo;s implementation of it?</p>

<p>But let&rsquo;s assume for this article that you are interested in finding
and using utility libraries. I show how to find some example functions
and reach two utility libraries that I use, very cleverly and
informatively named
<a href="http://hackage.haskell.org/package/MissingH"><code>MissingH</code></a> and
<a href="http://hackage.haskell.org/package/extra"><code>extra</code></a>.</p>

      <a href="http://conscientiousprogrammer.com/blog/2015/12/06/24-days-of-hackage-2015-day-6-finding-utilities-with-hoogle-and-hayoo-missingh-extra/">Read On &rarr;</a>
      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://conscientiousprogrammer.com/blog/2015/12/05/24-days-of-hackage-2015-day-5-should-not-typecheck-making-haskell-sort-of-dynamically-typed-with-deferred-type-errors/">24 days of Hackage, 2015: day 5: should-not-typecheck: making Haskell sort of dynamically typed with deferred type errors</a>
      </h1>
      <span class="post-date">Dec 5, 2015 &middot; 6 minute read &middot; <a href="http://conscientiousprogrammer.com/blog/2015/12/05/24-days-of-hackage-2015-day-5-should-not-typecheck-making-haskell-sort-of-dynamically-typed-with-deferred-type-errors/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="http://ConscientiousProgrammer.com/categories/haskell">Haskell</a><a class="label" href="http://ConscientiousProgrammer.com/categories/hackage">Hackage</a><a class="label" href="http://ConscientiousProgrammer.com/categories/should-not-typecheck">should-not-typecheck</a><a class="label" href="http://ConscientiousProgrammer.com/categories/stack">Stack</a><a class="label" href="http://ConscientiousProgrammer.com/categories/dynamic">dynamic</a><a class="label" href="http://ConscientiousProgrammer.com/categories/deferred-type-errors">deferred type errors</a><a class="label" href="http://ConscientiousProgrammer.com/categories/ghc-extensions">GHC extensions</a><a class="label" href="http://ConscientiousProgrammer.com/categories/testing">testing</a><a class="label" href="http://ConscientiousProgrammer.com/categories/hspec">HSpec</a>
      </span>
      
      <h2 id="table-of-contents-for-the-whole-series:60dd71330bbedef1aba1bef45daea5dd">Table of contents for the whole series</h2>

<p>A table of contents is at the top of the article for <a href="./blog/2015/11/30/haskell-tidbits-24-days-of-hackage-2015-day-1-introduction-and-stack/">day 1</a>.</p>

<h2 id="day-5:60dd71330bbedef1aba1bef45daea5dd">Day 5</h2>

<p>Have you ever been frustrated when using a statically typed language
because there&rsquo;s a type error somewhere in your code base but you want
to run your program anyway, either because you don&rsquo;t care about that
remote type error that has nothing to do with what you&rsquo;re working on,
or because you want to step through your code and debug what the type
error really is? I certainly have.</p>

<p>Also, have you ever wanted to write a unit test to verify that your
typed code disallows code you want to disallow, but you are
frustrated because how do you write code in a typed language that
says, &ldquo;This code (that you won&rsquo;t typecheck) won&rsquo;t typecheck&rdquo; and passes
the typechecker and runs?</p>

<p>Welcome to the land of GHC&rsquo;s
<a href="https://ghc.haskell.org/trac/ghc/wiki/DeferErrorsToRuntime">&ldquo;deferred type errors&rdquo;</a>,
a feature that has been part of GHC <a href="https://downloads.haskell.org/~ghc/7.6.1/docs/html/users_guide/defer-type-errors.html">since version 7.6.1</a> in 2013. Since
this was not covered in Ollie&rsquo;s
<a href="https://ocharles.org.uk/blog/pages/2014-12-01-24-days-of-ghc-extensions.html">2014 series &ldquo;24 Days of GHC Extensions&rdquo;</a>,
I decided to bring it up here, and in the context of a cute package, <a href="https://hackage.haskell.org/package/should-not-typecheck"><code>should-not-typecheck</code></a>
that hooks up with HSpec to make assertions that something won&rsquo;t
typecheck.</p>

      <a href="http://conscientiousprogrammer.com/blog/2015/12/05/24-days-of-hackage-2015-day-5-should-not-typecheck-making-haskell-sort-of-dynamically-typed-with-deferred-type-errors/">Read On &rarr;</a>
      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://conscientiousprogrammer.com/blog/2015/12/04/24-days-of-hackage-2015-day-4-wreq-web-client-programming-with-notes-on-lens-and-operator-syntax/">24 days of Hackage, 2015: day 4: wreq: Web client programming; with notes on lens and operator syntax</a>
      </h1>
      <span class="post-date">Dec 4, 2015 &middot; 11 minute read &middot; <a href="http://conscientiousprogrammer.com/blog/2015/12/04/24-days-of-hackage-2015-day-4-wreq-web-client-programming-with-notes-on-lens-and-operator-syntax/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="http://ConscientiousProgrammer.com/categories/haskell">Haskell</a><a class="label" href="http://ConscientiousProgrammer.com/categories/hackage">Hackage</a><a class="label" href="http://ConscientiousProgrammer.com/categories/wreq">wreq</a><a class="label" href="http://ConscientiousProgrammer.com/categories/json">JSON</a><a class="label" href="http://ConscientiousProgrammer.com/categories/lens">lens</a><a class="label" href="http://ConscientiousProgrammer.com/categories/aeson">aeson</a><a class="label" href="http://ConscientiousProgrammer.com/categories/syntax">syntax</a><a class="label" href="http://ConscientiousProgrammer.com/categories/pittsburgh-code-and-supply">Pittsburgh Code and Supply</a><a class="label" href="http://ConscientiousProgrammer.com/categories/standard-ml">Standard ML</a><a class="label" href="http://ConscientiousProgrammer.com/categories/ocaml">OCaml</a><a class="label" href="http://ConscientiousProgrammer.com/categories/elm">Elm</a><a class="label" href="http://ConscientiousProgrammer.com/categories/elixir">Elixir</a><a class="label" href="http://ConscientiousProgrammer.com/categories/types">types</a><a class="label" href="http://ConscientiousProgrammer.com/categories/domain-specific-languages">domain-specific languages</a>
      </span>
      
      <h2 id="table-of-contents-for-the-whole-series:de6d56fd6945d7d59fdd3a84148a0b85">Table of contents for the whole series</h2>

<p>A table of contents is at the top of the article for <a href="./blog/2015/11/30/haskell-tidbits-24-days-of-hackage-2015-day-1-introduction-and-stack/">day 1</a>.</p>

<h2 id="day-4:de6d56fd6945d7d59fdd3a84148a0b85">Day 4</h2>

<p>In the late 1990s, I eagerly bought the book
<a href="http://www.oreilly.com/openbook/webclient/">&ldquo;Web Client Programming with Perl&rdquo;</a>
and used the <a href="http://search.cpan.org/dist/libwww-perl/lib/LWP.pm">LWP</a>
library to scrape the Web in automated fashion. I continued doing that
into the 2000s. I am happy that nowadays, I can just use Haskell to do
this kind of programming, in a succinct way also.</p>

<p>Today&rsquo;s topic is <a href="http://www.serpentine.com/wreq/"><code>wreq</code></a>,
<a href="http://www.serpentine.com/blog/">Bryan O&rsquo;Sullivan</a>&rsquo;s high-level
library for doing Web client programming designed specifically for
usability.</p>

<p><code>wreq</code> makes use of the
<a href="https://hackage.haskell.org/package/aeson"><code>aeson</code></a> ecosystem for JSON
and <a href="https://hackage.haskell.org/package/lens"><code>lens</code></a> and ecosystem,
including
<a href="https://hackage.haskell.org/package/lens-aeson"><code>lens-aeson</code></a>, so you
may want to check out Ollie&rsquo;s 2012 Days of Hackage posts on
<a href="https://ocharles.org.uk/blog/posts/2012-12-07-24-days-of-hackage-aeson.html">aeson</a>
and <a href="https://ocharles.org.uk/blog/posts/2012-12-09-24-days-of-hackage-lens.html">lens</a>.</p>

<p>Since <code>wreq</code> already has an extensive
<a href="http://www.serpentine.com/wreq/">tutorial and reference documentation</a>,
I&rsquo;m not going to repeat its explanations. Instead, I&rsquo;m going to give an
example of use that should be simple enough to be understood from
context, then discuss the issue of using operator syntax in Haskell.</p>

      <a href="http://conscientiousprogrammer.com/blog/2015/12/04/24-days-of-hackage-2015-day-4-wreq-web-client-programming-with-notes-on-lens-and-operator-syntax/">Read On &rarr;</a>
      
    </div>
    
    
    
    <ul class="pagination">
        
        <li>
            <a href="./" aria-label="First"><span aria-hidden="true">&laquo;&laquo;</span></a>
        </li>
        
        <li
        class="disabled">
        <a href="" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>
        </li>
        
        <li
        class="active"><a href="./">1</a></li>
        
        <li
        ><a href="./page/2/">2</a></li>
        
        <li
        ><a href="./page/3/">3</a></li>
        
        <li
        ><a href="./page/4/">4</a></li>
        
        <li
        ><a href="./page/5/">5</a></li>
        
        <li
        ><a href="./page/6/">6</a></li>
        
        <li
        >
        <a href="./page/2/" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
        </li>
        
        <li>
            <a href="./page/6/" aria-label="Last"><span aria-hidden="true">&raquo;&raquo;</span></a>
        </li>
        
    </ul>
    
  </div>
</div>


<script>
  var _gaq=[['_setAccount','UA-41982602-1'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

</body>
</html>

